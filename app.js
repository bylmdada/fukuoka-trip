// ===== ç¦å²¡å…«å¤©ä¸ƒå¤œè¡Œç¨‹ Web App =====

// æ—…è¡Œæ—¥æœŸ
const TRIP_START = new Date('2026-02-08T10:00:00+09:00');
const TRIP_END = new Date('2026-02-15T18:00:00+09:00');

// åŒ¯ç‡
const JPY_TO_TWD = 0.22;

// ===== è¡Œç¨‹è³‡æ–™ï¼ˆå«åœ°åœ–é€£çµï¼‰=====
const itineraryData = [
    {
        day: 1, date: "2/8", weekday: "æ—¥", theme: "æŠµé”ç¦å²¡ãƒ»åšå¤šæ¼«éŠ", icon: "ğŸ›¬", weather: "5-11Â°C â˜ï¸",
        schedule: [
            { time: "10:00", title: "æŠµé”ç¦å²¡æ©Ÿå ´", desc: "ğŸš• æ­è¨ˆç¨‹è»Šè‡³é£¯åº—ç´„15åˆ†é˜ï¼ˆ5kmï¼‰", map: "ç¦å²¡ç©ºæ¸¯" },
            { time: "11:30", title: "å¯„æ”¾è¡Œæ", desc: "Il Palazzoï¼ˆ16:00å…¥ä½ï¼‰", map: "Hotel Il Palazzo ç¦å²¡" },
            { time: "12:00", title: "å¤©ç¥é»’æ¯›æµ ç„¼è‚‰ å‚æ˜Ÿ", desc: "ğŸ– A5é»‘æ¯›å’Œç‰›å•†æ¥­åˆé¤ Â¥1,500~3,000", tag: "lunch", map: "å¤©ç¥é»’æ¯›æµ ç„¼è‚‰ å‚æ˜Ÿ" },
            { time: "13:30", title: "æ«›ç”°ç¥ç¤¾", desc: "åšå¤šç¸½é®å®ˆãƒ»å±±ç¬ ç™¼æºåœ°", map: "æ«›ç”°ç¥ç¤¾ ç¦å²¡" },
            { time: "14:30", title: "å·ç«¯å•†åº—è¡—", desc: "ç¦å²¡æœ€å¤è€å•†åº—è¡—", map: "å·ç«¯å•†åº—è¡—" },
            { time: "15:30", title: "åšå¤šé‹æ²³åŸ", desc: "å¤§å‹è³¼ç‰©ä¸­å¿ƒãƒ»å™´æ³‰è¡¨æ¼”", map: "ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š" },
            { time: "18:30", title: "åšå¤šã‚‚ã¤é‹ ã‚„ã¾ä¸­", desc: "ğŸ² æ™šé¤ï¼šç‰›è…¸é‹ååº—", tag: "food", map: "åšå¤šã‚‚ã¤é‹ã‚„ã¾ä¸­ èµ¤å‚åº—" }
        ]
    },
    {
        day: 2, date: "2/9", weekday: "ä¸€", theme: "ğŸ¦ ä¹å·è‡ªç„¶å‹•ç‰©åœ’è¦ªå­åŒ…è»Š", icon: "ğŸ¦", weather: "4-10Â°C ğŸŒ¤ï¸",
        schedule: [
            { time: "08:00", title: "å¤©ç¥Il Palazzoå‡ºç™¼", desc: "ğŸš 10äººåº§æµ·ç…åŒ…è»Šãƒ»æº–æ™‚é›†åˆ", map: "Hotel Il Palazzo ç¦å²¡" },
            { time: "09:45", title: "æŠµé”ä¹å·è‡ªç„¶å‹•ç‰©åœ’", desc: "è»Šç¨‹ç´„1.5-2å°æ™‚ï¼ˆ100å…¬é‡Œï¼‰", map: "ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª" },
            { time: "10:00", title: "é ç´„å¢æ—å·´å£«", desc: "ğŸŸï¸ è‡³ç¶œåˆæ¡ˆå…§æ‰€é ç´„10:30æˆ–11:00å ´æ¬¡", tag: "ticket", map: "ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª" },
            { time: "10:30", title: "ğŸ¦ å¢æ—å·´å£«é«”é©—", desc: "ç´„50åˆ†é˜ãƒ»è¿‘è·é›¢é¤µé£Ÿç…å­è€è™å¤§è±¡", tag: "highlight", map: "ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª" },
            { time: "11:30", title: "åœ’å€è‡ªç”±åƒè§€", desc: "ğŸ˜ å‹•ç‰©äº’å‹•ãƒ»æ‹ç…§æ‰“å¡", map: "ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª" },
            { time: "12:30", title: "åœ’å€å…§åˆé¤", desc: "ğŸ± åœ’å€é¤å»³ç”¨é¤", tag: "lunch", map: "ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª" },
            { time: "14:00", title: "å‚™æ¡ˆï¼šç”±å¸ƒé™¢æˆ–åˆ¥åºœ", desc: "ç”±å¸ƒé™¢é‡‘é±—æ¹–(20-30åˆ†è»Šç¨‹)æˆ–åˆ¥åºœåœ°ç„(25-30åˆ†è»Šç¨‹)", map: "æ¹¯å¸ƒé™¢ é‡‘é±—æ¹–" },
            { time: "16:00", title: "å•Ÿç¨‹è¿”å›å¤©ç¥", desc: "ğŸš è¿”ç¨‹ç´„1.5-2å°æ™‚", map: "" },
            { time: "17:30", title: "æŠµé”å¤©ç¥é£¯åº—", desc: "ç¸½è¡Œç¨‹ç´„10å°æ™‚çµæŸ", map: "Hotel Il Palazzo ç¦å²¡" }
        ]
    },
    {
        day: 3, date: "2/10", weekday: "äºŒ", theme: "ğŸ¤– é‹¼å½ˆæœè–æ—¥", icon: "ğŸ¤–", weather: "5-11Â°C â˜€ï¸",
        schedule: [
            { time: "10:00", title: "LaLaport ç¦å²¡", desc: "å…¨çƒæœ€å¤§RX-93ff Î½é‹¼å½ˆï¼", tag: "gundam", map: "ã‚‰ã‚‰ã½ãƒ¼ã¨ç¦å²¡" },
            { time: "11:00", title: "GUNDAM SIDE-F", desc: "4F æ ¸å¿ƒå€åŸŸãƒ»ç¨å®¶å‘¨é‚Š", tag: "gundam", map: "ã‚¬ãƒ³ãƒ€ãƒ ãƒ‘ãƒ¼ã‚¯ç¦å²¡" },
            { time: "12:30", title: "LaLaportç¾é£Ÿå»£å ´", desc: "ğŸ– åˆé¤", tag: "lunch", map: "ã‚‰ã‚‰ã½ãƒ¼ã¨ç¦å²¡" },
            { time: "14:00", title: "VS PARK WITH G", desc: "é‹¼å½ˆä¸»é¡Œé«”è‚²å¨›æ¨‚", tag: "gundam", map: "VS PARK WITH G" },
            { time: "15:30", title: "namcoéŠæ¨‚å€", desc: "è¡—æ©Ÿãƒ»å¤¾å¨ƒå¨ƒæ©Ÿ", map: "ã‚‰ã‚‰ã½ãƒ¼ã¨ç¦å²¡ namco" },
            { time: "17:30", title: "Î½é‹¼å½ˆå¤œé–“é»ç‡ˆ", desc: "âœ¨ 45é€±å¹´é™å®šç‡ˆå…‰ç§€", tag: "gundam", map: "ã‚‰ã‚‰ã½ãƒ¼ã¨ç¦å²¡" },
            { time: "19:00", title: "ç„¼è‚‰ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³", desc: "ğŸ– æ™šé¤ï¼šåšå¤šç«™é«˜ç´šç‡’è‚‰", tag: "food", map: "ç„¼è‚‰ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ åšå¤šé§…ä¸­å¤®è¡—" }
        ]
    },
    {
        day: 4, date: "2/11", weekday: "ä¸‰", theme: "é–€å¸æ¸¯ãƒ»å°å€‰ãƒ»çš¿å€‰å±±å¤œæ™¯", icon: "ğŸŒƒ", weather: "5-12Â°C â˜ï¸",
        schedule: [
            { time: "07:00", title: "å¤©ç¥å—ç«™å‡ºç™¼", desc: "ğŸš‡ åœ°éµä¸ƒéšˆç·šâ†’å¤©ç¥â†’JR Sonicè‡³å°å€‰ï¼ˆç´„40åˆ†é˜ï¼‰", map: "å¤©ç¥å—é§…" },
            { time: "08:30", title: "å°å€‰åŸ", desc: "ğŸ¯ åŒ—ä¹å·å¸‚è±¡å¾µãƒ»é–€ç¥¨Â¥400/æˆäºº", tag: "ticket", map: "å°å€‰åŸ" },
            { time: "10:00", title: "æ—¦éå¸‚å ´", desc: "ğŸœ åŒ—ä¹å·çš„å»šæˆ¿ãƒ»æ—©å¸‚æ•£ç­–", map: "æ—¦éå¸‚å ´" },
            { time: "11:00", title: "JRè‡³é–€å¸æ¸¯", desc: "ğŸšƒ æ™®é€šåˆ—è»Šç´„15åˆ†ãƒ»Â¥500/æˆäºº", map: "é–€å¸æ¸¯é§…" },
            { time: "11:30", title: "é–€å¸æ¸¯æ‡·èˆŠå€", desc: "ğŸ›ï¸ å¤§æ­£æµªæ¼«é¢¨æƒ…å»ºç¯‰ç¾¤", map: "é–€å¸æ¸¯ãƒ¬ãƒˆãƒ­" },
            { time: "12:30", title: "åˆé¤ï¼šç‡’å’–å“©", desc: "ğŸ› é–€å¸æ¸¯åç‰©ï¼", tag: "lunch", map: "é–€å¸æ¸¯ ç„¼ãã‚«ãƒ¬ãƒ¼" },
            { time: "13:30", title: "æ½®é¢¨è™Ÿå°ç«è»Š", desc: "ğŸš‚ æ‡·èˆŠè§€å…‰åˆ—è»Šãƒ»Â¥500/æˆäºº", tag: "highlight", map: "é–€å¸æ¸¯ãƒˆãƒ­ãƒƒã‚³æ½®é¢¨å·" },
            { time: "14:30", title: "è¿”å›å°å€‰", desc: "ğŸšƒ JRé–€å¸æ¸¯â†’å°å€‰ï¼ˆ15åˆ†ï¼‰", map: "å°å€‰é§…" },
            { time: "15:00", title: "å°å€‰è‡ªç”±è³¼ç‰©", desc: "ğŸ›ï¸ å½ˆæ€§ä¼‘æ¯æ™‚é–“", map: "å°å€‰é§…" },
            { time: "17:00", title: "çš¿å€‰å±±çºœè»Š", desc: "ğŸš¡ è¥¿éµå·´å£«18è™Ÿâ†’çºœè»Šãƒ»ä¾†å›Â¥1,200/æˆäºº", tag: "highlight", map: "çš¿å€‰å±±ã‚±ãƒ¼ãƒ–ãƒ«ã‚«ãƒ¼" },
            { time: "18:00", title: "çš¿å€‰å±±å¤œæ™¯", desc: "ğŸŒƒ æ–°æ—¥æœ¬ä¸‰å¤§å¤œæ™¯ï¼å†¬å­£äº®ç‡ˆè‡³20:00", tag: "nightview", map: "çš¿å€‰å±±å±•æœ›å°" },
            { time: "19:30", title: "è¿”å›å¤©ç¥", desc: "ğŸšŒ å·´å£«â†’å°å€‰â†’JR Sonicâ†’å¤©ç¥ï¼ˆæœ«ç­ç¢ºèªï¼‰", map: "å¤©ç¥é§…" }
        ]
    },
    {
        day: 5, date: "2/12", weekday: "å››", theme: "æµ·ä¹‹ä¸­é“ãƒ»æ°´æ—é¤¨", icon: "ğŸ¬", weather: "4-10Â°C ğŸŒ¤ï¸",
        schedule: [
            { time: "09:30", title: "åšå¤šç«™", desc: "æ­JRé¦™æ¤ç·š", map: "åšå¤šé§…" },
            { time: "10:30", title: "æµ·æ´‹ä¸–ç•Œ æµ·ä¹‹ä¸­é“", desc: "ä¹å·æœ€å¤§æ°´æ—é¤¨", map: "ãƒãƒªãƒ³ãƒ¯ãƒ¼ãƒ«ãƒ‰æµ·ã®ä¸­é“" },
            { time: "12:30", title: "æ°´æ—é¤¨é¤å»³", desc: "ğŸ± åˆé¤", tag: "lunch", map: "ãƒãƒªãƒ³ãƒ¯ãƒ¼ãƒ«ãƒ‰æµ·ã®ä¸­é“" },
            { time: "14:00", title: "æµ·ä¹‹ä¸­é“æµ·æ¿±å…¬åœ’", desc: "å¯ç§Ÿè‡ªè¡Œè»ŠéŠè¦½", map: "æµ·ã®ä¸­é“æµ·æµœå…¬åœ’" },
            { time: "17:00", title: "è¿”å›ç¦å²¡", desc: "", map: "" },
            { time: "19:00", title: "åšå¤šé”æ‘©", desc: "ğŸœ æ™šé¤ï¼šæ¿ƒåšç³»æ‹‰éºµ", tag: "food", map: "åšå¤šã ã‚‹ã¾ ç·æœ¬åº—" }
        ]
    },
    {
        day: 6, date: "2/13", weekday: "äº”", theme: "ç¦å²¡å¡”ãƒ»ç™¾é“æµ·æ¿±", icon: "ğŸ—¼", weather: "5-11Â°C â˜€ï¸",
        schedule: [
            { time: "10:00", title: "ç¦å²¡å¸‚åšç‰©é¤¨", desc: "ğŸ›ï¸ åœ‹å¯¶é‡‘å°ãƒ»ä¸­å­¸ç”Ÿä»¥ä¸‹å…è²»", map: "ç¦å²¡å¸‚åšç‰©é¤¨" },
            { time: "11:30", title: "æµ·æ¿±ç™¾é“å…¬åœ’", desc: "ğŸ–ï¸ æ²™ç˜æ•£æ­¥ãƒ»é©åˆè¦ªå­æ”¾é¢¨", map: "ã‚·ãƒ¼ã‚µã‚¤ãƒ‰ã‚‚ã‚‚ã¡æµ·æµœå…¬åœ’" },
            { time: "12:30", title: "Marizon åˆé¤", desc: "ğŸ½ï¸ æµ·æ¿±é¤å»³ãƒ»è³æµ·æ™¯ç”¨é¤", tag: "lunch", map: "ãƒãƒªã‚¾ãƒ³" },
            { time: "14:00", title: "FUK COFFEE Parks", desc: "â˜• å¤§æ¿ å…¬åœ’æ—ãƒ»æ‹›ç‰Œæ˜­å’Œå¸ƒä¸", map: "FUK COFFEE Parks" },
            { time: "15:00", title: "å¤§æ¿ å…¬åœ’", desc: "ğŸš£ ç§Ÿå¤©éµèˆ¹éŠæ¹–ãƒ»é¤µé­šæ”¾é¬†", map: "å¤§æ¿ å…¬åœ’" },
            { time: "16:30", title: "ç¦å²¡åŸè·¡", desc: "ğŸ¯ å¤•é™½æ™‚åˆ»ãƒ»èˆé¶´å…¬åœ’æ•£æ­¥", map: "ç¦å²¡åŸè·¡" },
            { time: "18:00", title: "æ™šé¤æ™‚é–“", desc: "ğŸœ è¿”å›å¤©ç¥/ä¸­æ´²ç”¨é¤", tag: "food", map: "" },
            { time: "19:30", title: "ç¦å²¡å¡”å¤œæ™¯ ğŸŒƒ", desc: "âœ¨ 234mç™¾è¬å¤œæ™¯ãƒ»çœå»ç™½å¤©é–€ç¥¨ï¼", tag: "food", map: "ç¦å²¡ã‚¿ãƒ¯ãƒ¼" }
        ]
    },
    {
        day: 7, date: "2/14", weekday: "å…­", theme: "å¤©ç¥è³¼ç‰©ãƒ»ä¸­æ´²å¤œå¸‚", icon: "ğŸ›ï¸", weather: "5-12Â°C â˜ï¸",
        schedule: [
            { time: "10:00", title: "å¤©ç¥åœ°ä¸‹è¡—", desc: "150+åº—èˆ–ãƒ»æ­é¢¨è£æ½¢", map: "å¤©ç¥åœ°ä¸‹è¡—" },
            { time: "12:00", title: "ç¦å²¡ç„¼è‚‰ kintan", desc: "ğŸ– åˆé¤ï¼šå„ªè³ªç‡’è‚‰å¥—é¤", tag: "lunch", map: "ç„¼è‚‰kintan ç¦å²¡å¤©ç¥åº—" },
            { time: "13:30", title: "å¤©ç¥ç™¾è²¨å€", desc: "å¤§ä¸¸ã€PARCOã€Bic Camera", map: "å¤©ç¥ã‚³ã‚¢" },
            { time: "15:00", title: "å›é…’åº—ä¼‘æ¯", desc: "ğŸ’• æƒ…äººç¯€ï¼", map: "" },
            { time: "18:00", title: "ä¸­æ´²å±‹å°è¡—", desc: "ğŸ® æ™šé¤ï¼šè·¯é‚Šæ”¤æ–‡åŒ–", tag: "food", map: "ä¸­æ´²å±‹å°" },
            { time: "19:00", title: "å°é‡‘ã¡ã‚ƒã‚“", desc: "æ‹›ç‰Œç‚’æ‹‰éºµ", tag: "food", map: "å±‹å° å°é‡‘ã¡ã‚ƒã‚“" }
        ]
    },
    {
        day: 8, date: "2/15", weekday: "æ—¥", theme: "æœ€å¾Œæ¡è²·ãƒ»è³¦æ­¸", icon: "âœˆï¸", weather: "5-11Â°C â˜ï¸",
        schedule: [
            { time: "09:00", title: "æŸ³æ©‹é€£åˆå¸‚å ´", desc: "åšå¤šçš„å»šæˆ¿ãƒ»æ–°é®®æµ·ç”¢", map: "æŸ³æ©‹é€£åˆå¸‚å ´" },
            { time: "12:00", title: "Check-out", desc: "å¯„æ”¾è¡Œæï¼ˆé€€æˆ¿12:00ï¼‰", map: "Hotel Il Palazzo ç¦å²¡" },
            { time: "11:00", title: "æœ€å¾Œæ¡è²·", desc: "è—¥å¦ãƒ»ä¼´æ‰‹ç¦®", map: "ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ† å¤©ç¥" },
            { time: "12:00", title: "æœ€å¾Œä¸€é¤æ‹‰éºµ", desc: "ğŸœ åˆé¤", tag: "lunch", map: "ä¸€è˜­ å¤©ç¥åº—" },
            { time: "14:00", title: "å‰å¾€æ©Ÿå ´", desc: "é ç•™å……è¶³æ™‚é–“", map: "ç¦å²¡ç©ºæ¸¯" },
            { time: "15:30", title: "ç¦å²¡æ©Ÿå ´", desc: "å…ç¨…åº—æ¡è²·", map: "ç¦å²¡ç©ºæ¸¯ å›½éš›ç·š" },
            { time: "18:00", title: "ç­æ©Ÿèµ·é£›", desc: "å†è¦‹ç¦å²¡ï¼ğŸ‘‹", map: "" }
        ]
    }
];

// ç¾é£Ÿè³‡æ–™ï¼ˆå«ç„¼è‚‰ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ï¼‰
const foodData = [
    { icon: "ğŸœ", name: "è±šéª¨æ‹‰éºµ", shops: "ä¸€è˜­ãƒ»ä¸€é¢¨å ‚ãƒ»Shin-Shin" },
    { icon: "ğŸ²", name: "ç‰›è…¸é‹", shops: "ã‚„ã¾ä¸­ãƒ»ã‚‚ã¤å¹¸" },
    { icon: "ğŸ²", name: "æ°´ç‚Šé‹", shops: "åšå¤šè¯å‘³é³¥" },
    { icon: "ğŸ±", name: "é°»é­šé£¯", shops: "è‹¥æ¾å±‹ãƒ»æœ¬å‰å±‹" },
    { icon: "ğŸ–", name: "A5ç‡’è‚‰", shops: "å‚æ˜Ÿãƒ»ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³" },
    { icon: "ğŸ®", name: "å±‹å°", shops: "ä¸­æ´²å±‹å°è¡—" },
    { icon: "ğŸ™", name: "æ˜å¤ªå­", shops: "ã‚ã‚“ãŸã„é‡" },
    { icon: "ğŸ¡", name: "æ¢…æé¤…", shops: "å¤ªå®°åºœè¡¨åƒé“" }
];

// é£¯åº—é™„è¿‘æ¨è–¦ï¼ˆIl Palazzo å‘¨é‚Šç¾é£Ÿï¼‰
const nearbyData = [
    {
        icon: "ğŸœ",
        name: "ä¸€è˜­ å¤©ç¥è¥¿é€šåº—",
        desc: "ç¦å²¡ä»£è¡¨è±šéª¨æ‹‰éºµãƒ»å¯èª¿æ¿ƒåº¦è¾£åº¦ç¡¬åº¦",
        addr: "å¤©ç¥è¥¿é€š",
        tag: "24Hç‡Ÿæ¥­",
        note: "è¶…é©åˆå®µå¤œï¼è·é£¯åº—æ­¥è¡Œ5åˆ†é˜",
        map: "ä¸€è˜­ å¤©ç¥è¥¿é€šåº—"
    },
    {
        icon: "ğŸœ",
        name: "ä¸€è˜­ å¤©ç¥åº—",
        desc: "ä½æ–¼åœ°ä¸‹è¡—ICHINAKAãƒ»æœ¬åº—é¢¨å‘³",
        addr: "å¤©ç¥1-10-20 B2F",
        tag: "11-23æ™‚",
        note: "è³¼ç‰©é€›ç´¯äº†ä¾†ä¸€ç¢—ï¼è·é£¯åº—æ­¥è¡Œ7åˆ†é˜",
        map: "ä¸€è˜­ å¤©ç¥åº—"
    },
    {
        icon: "ğŸ¥©",
        name: "ç‡’è‚‰ã™ã©ã†æ˜¥å‰",
        desc: "Tabelogç™¾ååº—ï¼åšåˆ‡é ‚ç´šå’Œç‰›",
        addr: "æ˜¥å‰3-11-19ï¼ˆæ­¥è¡Œ3åˆ†ï¼‰",
        tag: "å¿…è¨‚ä½ï¼",
        note: "é¤å»³äººæ°£è¶…æ—ºãƒ»å»ºè­°ææ—©é ç´„",
        map: "ç„¼è‚‰ã™ã©ã† æ˜¥å‰"
    },
    {
        icon: "ğŸ¥©",
        name: "Nikuichi è‚‰ã„ã¡",
        desc: "åšå¤šç«™å—ãƒ»äººæ°£ç‡’è‚‰åº—",
        addr: "åšå¤šé§…å—1-2-18",
        tag: "16:00-00:00",
        note: "åšå¤šç«™æ­¥è¡Œ5åˆ†ãƒ»æ°£æ°›å¥½åƒ¹æ ¼åˆç†",
        map: "è‚‰ã„ã¡ åšå¤š"
    },
    {
        icon: "ğŸ²",
        name: "æ¨‚å¤©åœ°",
        desc: "åœ¨åœ°äººæœ€æ„›ç‰›è…¸é‹ãƒ»æ¿ƒéƒæ¹¯é ­",
        addr: "ä¸­æ´²ï¼ˆæ­¥è¡Œ5åˆ†ï¼‰",
        tag: "ç‰›è…¸é‹",
        note: "ç¦å²¡åç‰©ï¼åƒå®Œæ¹¯åº•å¯åŠ éºµ",
        map: "æ¥½å¤©åœ° ä¸­æ´²æœ¬åº—"
    },
    {
        icon: "ğŸ²",
        name: "åšå¤šè¯å‘³é³¥",
        desc: "æ°´ç‚Šé›é‹å°ˆé–€åº—ãƒ»æ¿ƒéƒé›æ¹¯",
        addr: "å¤©ç¥åº—",
        tag: "æ°´ç‚Šé‹",
        note: "é›è‚‰é®®å«©ãƒ»æ¹¯é ­è¶…æ¿ƒéƒ",
        map: "åšå¤šè¯å‘³é³¥ å¤©ç¥åº—"
    },
    {
        icon: "ğŸ™",
        name: "å…ƒç¥–åšå¤šæ˜å¤ªé‡",
        desc: "æ—¥æœ¬ç¬¬ä¸€å®¶æ˜å¤ªå­ä¸¼å°ˆé–€åº—",
        addr: "è¥¿ä¸­æ´²ï¼ˆæ­¥è¡Œ3åˆ†ï¼‰",
        tag: "æ˜å¤ªå­æ§",
        note: "æ˜å¤ªå­æ²¾éºµä¹Ÿè¶…è®šï¼",
        map: "å…ƒç¥–åšå¤šã‚ã‚“ãŸã„é‡"
    },
    {
        icon: "ğŸ£",
        name: "ã†ãŠç”°",
        desc: "æ•£å£½å¸ãƒ»æ˜å¤ªå­é®­é­šåµç‰å­ç‡’ä¸¼",
        addr: "ä¸­æ´²",
        tag: "ä»½é‡å¤§",
        note: "CPå€¼è¶…é«˜çš„æµ·é®®ä¸¼",
        map: "ã†ãŠç”° ä¸­æ´²"
    },
    {
        icon: "âœˆï¸",
        name: "FUK COFFEE ç¥‡åœ’åº—",
        desc: "æ©Ÿå ´ä¸»é¡Œå’–å•¡å»³ãƒ»æ˜­å’Œå¸ƒä¸å¿…é»",
        addr: "ç¥‡åœ’ç”ºï¼ˆæ«›ç”°ç¥ç¤¾å‰ç«™1åˆ†ï¼‰",
        tag: "è¶…äººæ°£",
        note: "æ‹¿éµ+20å††å¯æ‹‰å°é£›æ©Ÿåœ–æ¡ˆ",
        map: "FUK COFFEE ç¥‡åœ’"
    },
    {
        icon: "ğŸ",
        name: "RINGO è˜‹æœæ´¾",
        desc: "ç¾çƒ¤å¡å£«é”è˜‹æœæ´¾ãƒ»å¤–é…¥å…§é¤¡å¤§å¡Šè˜‹æœ",
        addr: "å¤©ç¥åœ°ä¸‹è¡—è¥¿4",
        tag: "ä¸‹åˆèŒ¶",
        note: "å›é£¯åº—å‰çš„é»å¿ƒé¦–é¸",
        map: "RINGO å¤©ç¥åœ°ä¸‹è¡—"
    },
    {
        icon: "ğŸ¥",
        name: "å¤©ç¥èŒ¶å±‹",
        desc: "æ³•å¼è–„é¤…å¯éº—é¤…ãƒ»å†°æ·‡æ·‹å’–å•¡",
        addr: "å¤©ç¥",
        tag: "è¦ªå­å‹å–„",
        note: "åˆå¾Œæ•£æ­¥ç”œé»ãƒ»æœ‰å…§ç”¨åº§ä½",
        map: "å¤©ç¥èŒ¶å±‹ãŸã°ã­ã®ã—"
    }
];

// é£¯åº—é™„è¿‘è³¼ç‰©åº—å®¶ï¼ˆå«24å°æ™‚å•†åº—ï¼‰
const shoppingData = [
    { 
        icon: "ğŸ›’", 
        name: "MaxValu Express åšå¤šç¥‡åœ’åº—", 
        desc: "24Hè¶…å¸‚ï¼ç”Ÿé®®é£Ÿå“ãƒ»ç†Ÿé£Ÿä¾¿ç•¶ãƒ»æ—¥ç”¨å“", 
        addr: "ç¥‡åœ’ç”º7-20",
        hours: "â­ 24å°æ™‚ç‡Ÿæ¥­",
        distance: "æ­¥è¡Œ8åˆ†ï¼ˆæ«›ç”°ç¥ç¤¾æ—ï¼‰",
        map: "ãƒãƒƒã‚¯ã‚¹ãƒãƒªãƒ¥ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹åšå¤šç¥‡åœ’åº—"
    },
    { 
        icon: "ğŸª", 
        name: "Foodway ä¸­æ´²é£Ÿå°ç”ºã‚²ã‚¤ãƒ„åº—", 
        desc: "24Hè¶…å¸‚ï¼ä¸­æ´²å·ç«¯ç«™ç›´çµãƒ»ç”Ÿé®®ç†Ÿé£Ÿ", 
        addr: "Gate'så¤§æ¨“ B1F",
        hours: "â­ å¹³æ—¥24Hãƒ»é€±æ—¥ç‡Ÿæ¥­è‡³4AM",
        distance: "æ­¥è¡Œ5åˆ†ï¼ˆè»Šç«™ç›´çµï¼‰",
        map: "ãƒ•ãƒ¼ãƒ‰ã‚¦ã‚§ã‚¤ ä¸­æ´²é£Ÿå°ç”ºã‚²ã‚¤ãƒ„åº—"
    },
    { 
        icon: "ğŸª™", 
        name: "3COINS +plus", 
        desc: "300å††å‡ä¸€é›œè²¨ãƒ»æœ‰é£Ÿå“å€", 
        addr: "ãƒŸãƒ¼ãƒŠå¤©ç¥ B1F",
        hours: "10:00-21:00",
        distance: "æ­¥è¡Œ5-7åˆ†é˜",
        map: "3COINS plus ãƒŸãƒ¼ãƒŠå¤©ç¥åº—"
    },
    { 
        icon: "ğŸ“·", 
        name: "Bic Camera 2å·é¤¨", 
        desc: "å®¶é›»3Cãƒ»è—¥å¦ãƒ»å…ç¨…", 
        addr: "å¤©ç¥2-4-5",
        hours: "10:00-21:00",
        distance: "æ­¥è¡Œ2-3åˆ†é˜ â­æœ€è¿‘",
        map: "ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©å¤©ç¥2å·é¤¨"
    },
    { 
        icon: "ğŸ“·", 
        name: "Bic Camera 1å·é¤¨", 
        desc: "å®¶é›»ãƒ»çœ¼é¡ãƒ»è‡ªè¡Œè»Š", 
        addr: "ä»Šæ³‰1-25-1",
        hours: "10:00-21:00",
        distance: "æ­¥è¡Œ5-7åˆ†é˜",
        map: "ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©å¤©ç¥1å·é¤¨"
    }
];

// 24å°æ™‚ä¾¿åˆ©è¶…å•†è³‡è¨Š
const convenienceStoreData = [
    { brand: "7-Eleven", icon: "ğŸ”´", locations: ["åšå¤šä¸­æ´²3ä¸ç›®", "åšå¤šä¸­æ´²å¤§é€šã‚Š", "æ˜¥å‰"] },
    { brand: "FamilyMart", icon: "ğŸŸ¢", locations: ["åšå¤šãƒªãƒãƒ¬ã‚¤ãƒ³", "åšå¤šä¸­æ´²å››ä¸ç›®"] },
    { brand: "Lawson", icon: "ğŸ”µ", locations: ["ä¸Šå·ç«¯ç”º", "ä¸­æ´²ã§ã‚ã„æ©‹é€šã‚Š", "è¥¿ä¸­æ´²"] }
];

// 100å††å•†åº—è³‡æ–™
const hundredYenData = [
    {
        icon: "ğŸ”´",
        brand: "DAISO",
        name: "ãƒ©ã‚·ãƒƒã‚¯ç¦å²¡å¤©ç¥åº—",
        addr: "ãƒ©ã‚·ãƒƒã‚¯å†…",
        hours: "10:00-20:00",
        tag: "3å“ç‰Œè¤‡åˆ",
        map: "DAISO ãƒ©ã‚·ãƒƒã‚¯ç¦å²¡å¤©ç¥åº—"
    },
    {
        icon: "ğŸ”´",
        brand: "DAISO",
        name: "ã‚¤ã‚ªãƒ³ã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ã‚ºç¦å²¡åº—",
        addr: "ã‚¤ã‚ªãƒ³4F",
        hours: "9:00-21:00",
        tag: "æœ€æ—©é–‹",
        map: "DAISO ã‚¤ã‚ªãƒ³ã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ã‚ºç¦å²¡åº—"
    },
    {
        icon: "ğŸŸ¢",
        brand: "Seria",
        name: "ãƒŸãƒ¼ãƒŠå¤©ç¥åº—",
        addr: "ãƒŸãƒ¼ãƒŠ6F",
        hours: "10:00-21:00",
        tag: "å¤§å‹åº—",
        map: "ã‚»ãƒªã‚¢ ãƒŸãƒ¼ãƒŠå¤©ç¥åº—"
    },
    {
        icon: "ğŸŸ¡",
        brand: "Can Do",
        name: "å¤©ç¥åº—",
        addr: "æ–°å¤©ç”ºåœ°ä¸‹ãƒ•ã‚¡ãƒ¼ãƒœ",
        hours: "10:00-20:00",
        tag: "",
        map: "ã‚­ãƒ£ãƒ³ãƒ‰ã‚¥ å¤©ç¥åº—"
    }
];

// å¤¾å¨ƒå¨ƒæ©Ÿåº—è³‡æ–™
const arcadeData = {
    tenjin: [
        { name: "GiGO ç¦å²¡å¤©ç¥", desc: "å¤¾å¨ƒå¨ƒãƒ»å¤§é ­è²¼ãƒ»éŸ³Game", note: "è¥¿é‰„ç¦å²¡é§…æ­¥è¡Œ3åˆ†", map: "GiGO ç¦å²¡å¤©ç¥" },
        { name: "ã‚¿ã‚¤ãƒˆãƒ¼ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ç¦å²¡å¤©ç¥åº—", desc: "æ‰­è›‹ãƒ»å¤§é ­è²¼ãƒ»å¤¾å¨ƒå¨ƒ", note: "1-2Fæœ‰å¤¾å¨ƒå¨ƒ", map: "ã‚¿ã‚¤ãƒˆãƒ¼ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ç¦å²¡å¤©ç¥åº—" },
        { name: "ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ¯ãƒ³ ç¦å²¡å¤©ç¥åº—", desc: "å¤§å‹ç¶œåˆéŠæ¨‚å ´", note: "å¾ˆå¤šç¨®éŠæˆ²", map: "ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ¯ãƒ³ ç¦å²¡å¤©ç¥åº—" },
        { name: "GiGO ãƒŸãƒ¼ãƒŠå¤©ç¥", desc: "å¤¾å¨ƒå¨ƒãƒ»éŸ³Game", note: "ãƒŸãƒ¼ãƒŠå†…", map: "GiGO ãƒŸãƒ¼ãƒŠå¤©ç¥" }
    ],
    hakata: [
        { name: "namco åšå¤šãƒã‚¹ã‚¿ãƒ¼ãƒŸãƒŠãƒ«åº—", desc: "æœ€æ–°æ©Ÿå°ãƒ»é™å®šæ™¯å“", note: "åšå¤šBT 7F", map: "namco åšå¤šãƒã‚¹ã‚¿ãƒ¼ãƒŸãƒŠãƒ«åº—", recommended: true },
        { name: "ã‚¿ã‚¤ãƒˆãƒ¼ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤šåº—", desc: "å¤§å‹ãƒ»é©åˆå…¨å®¶", note: "Canal City", map: "ã‚¿ã‚¤ãƒˆãƒ¼ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤šåº—" },
        { name: "G-palaåšå¤š", desc: "10å††å¤¾å¨ƒå¨ƒï¼", note: "éŸ³Gameä¹Ÿå¤š", map: "G-palaåšå¤š", recommended: true }
    ]
};

// æœé£¾åº—è³‡æ–™
const clothingData = [
    {
        icon: "ğŸ”´",
        brand: "UNIQLO",
        name: "ãƒ¦ãƒ‹ã‚¯ãƒ­å¤©ç¥åº—",
        floor: "ãƒŸãƒ¼ãƒŠå¤©ç¥ 1-2F",
        tag: "ä¹å·æœ€å¤§",
        map: "ãƒ¦ãƒ‹ã‚¯ãƒ­ ãƒŸãƒ¼ãƒŠå¤©ç¥åº—"
    },
    {
        icon: "ğŸ”µ",
        brand: "GU",
        name: "ã‚¸ãƒ¼ãƒ¦ãƒ¼å¤©ç¥åº—",
        floor: "ãƒŸãƒ¼ãƒŠå¤©ç¥ 3F",
        tag: "ä¹å·æœ€å¤§ç´š",
        map: "GU ãƒŸãƒ¼ãƒŠå¤©ç¥åº—"
    },
    {
        icon: "ğŸŸ¢",
        brand: "GAP",
        name: "ç¦å²¡ä¸‰è¶Šåº—",
        floor: "ç¦å²¡ä¸‰è¶Š 3F",
        tag: "",
        map: "Gap ç¦å²¡ä¸‰è¶Šåº—"
    },
    {
        icon: "ğŸŸ¤",
        brand: "ç„¡å°è‰¯å“",
        name: "å¤§ä¸¸ç¦å²¡å¤©ç¥åº—",
        floor: "å¤§ä¸¸",
        tag: "2024è£ä¿®æ–°é–‹",
        map: "ç„¡å°è‰¯å“ å¤§ä¸¸ç¦å²¡å¤©ç¥åº—"
    },
    {
        icon: "ğŸŸ¤",
        brand: "ç„¡å°è‰¯å“",
        name: "å¤©ç¥ã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ã‚ºç¦å²¡åº—",
        floor: "ã‚¤ã‚ªãƒ³ã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ã‚º",
        tag: "",
        map: "ç„¡å°è‰¯å“ å¤©ç¥ã‚·ãƒ§ãƒƒãƒ‘ãƒ¼ã‚ºç¦å²¡åº—"
    }
];

// JINS çœ¼é¡åº—è³‡æ–™ï¼ˆå¤©ç¥åœ°å€ï¼‰
const jinsData = [
    {
        icon: "ğŸ‘“",
        name: "JINS å¤©ç¥åœ°ä¸‹è¡—åº—",
        addr: "å¤©ç¥2ä¸ç›®åœ°ä¸‹3è™Ÿè¥¿2è¡—å€Aå€",
        phone: "092-726-7188",
        hours: "10:00-21:00",
        rating: "â­ 4.3ï¼ˆ31å‰‡è©•è«–ï¼‰",
        tag: "åœ°ä¸‹è¡—å…§",
        note: "è³¼ç‰©é †ä¾¿é…é¡ãƒ»äº¤é€šä¾¿åˆ©",
        map: "JINS å¤©ç¥åœ°ä¸‹è¡—åº—"
    },
    {
        icon: "ğŸ‘“",
        name: "JINS ãƒŸãƒ¼ãƒŠå¤©ç¥åº—",
        addr: "å¤©ç¥4ä¸ç›®3ç•ª8è™ŸãƒŸãƒ¼ãƒŠå¤©ç¥1F",
        phone: "092-761-7070",
        hours: "10:00-20:00",
        rating: "â­ 4.1ï¼ˆ80å‰‡è©•è«–ï¼‰",
        tag: "äººæ°£æœ€é«˜",
        note: "æœ€å¿«30åˆ†é˜å®Œæˆãƒ»è­·ç…§å…ç¨…çœ10%",
        map: "JINS ãƒŸãƒ¼ãƒŠå¤©ç¥åº—",
        recommended: true
    },
    {
        icon: "ğŸ‘“",
        name: "JINS å¤©ç¥è¥¿é€šã‚Šåº—",
        addr: "å¤©ç¥2ä¸ç›®4ç•ª20è™Ÿå¤©ç¥ãƒ—ãƒ©ãƒƒã‚µ1F",
        phone: "092-726-2080",
        hours: "10:00-20:00",
        rating: "â­ 4.1ï¼ˆ25å‰‡è©•è«–ï¼‰",
        tag: "ä¿¡ç”¨å¡/è¡Œå‹•æ”¯ä»˜",
        note: "æ”¯æ´å¤šç¨®ä»˜æ¬¾æ–¹å¼",
        map: "JINS å¤©ç¥è¥¿é€šã‚Šåº—"
    }
];

// Mounjaroï¼ˆãƒãƒ³ã‚¸ãƒ£ãƒ­ï¼‰ æ¸›é‡è¨ºæ‰€è³‡æ–™
const mounjaroClinicData = [
    {
        icon: "ğŸ’‰",
        name: "Fontana Clinic å¤©ç¥",
        addr: "ä¸­å¤®å€å¤©ç¥2ä¸ç›®ï¼ˆè¿‘å”å‰è¨¶å¾·å¤©ç¥åº—ï¼‰",
        phone: "éœ€é›»è©±æˆ–LINEé ç´„",
        hours: "å¹³æ—¥ 10:00-19:00",
        distance: "æ­¥è¡Œ10-15åˆ†é˜",
        tag: "æ¨è–¦",
        note: "å°ˆé–€Mounjaroè™•æ–¹è«®è©¢ãƒ»é©åˆçŸ­æœŸæ—…å®¢ãƒ»å¯ç·šä¸Šé ç´„",
        map: "Fontana Clinic å¤©ç¥",
        recommended: true
    },
    {
        icon: "ğŸ¥",
        name: "Murayama Clinic",
        addr: "å¤©ç¥2-4-20 å¤©ç¥Plaza 2F",
        phone: "éœ€é›»è©±é ç´„",
        hours: "è¨ºç™‚æ™‚é–“éœ€ç¢ºèª",
        distance: "æ­¥è¡Œç´„8åˆ†é˜",
        tag: "å…§ç§‘ãƒ»èƒƒè…¸ç§‘",
        note: "å…§ç§‘è…¸èƒƒç§‘ç‚ºä¸»ãƒ»éœ€è©¢å•æ¸›é‡è™•æ–¹",
        map: "Murayama Clinic å¤©ç¥"
    },
    {
        icon: "ğŸ“±",
        name: "ç·šä¸Šè¨ºæ‰€ï¼ˆDMMç­‰ï¼‰",
        addr: "ç·šä¸Šè¨ºç™‚ãƒ»å¯å®…é…è‡³é£¯åº—",
        phone: "ç¶²è·¯é ç´„",
        hours: "24å°æ™‚ç·šä¸Š",
        distance: "ç„¡éœ€å¤–å‡º",
        tag: "å®…é…æ–¹ä¾¿",
        note: "é©åˆä¸æ–¹ä¾¿å¤–å‡ºè€…ãƒ»å¯é…é€è‡³ Il Palazzo",
        map: ""
    }
];

// ç¦å²¡æ©Ÿå ´è³¼ç‰©è³‡æ–™
const airportShopData = {
    dutyfree: [
        { name: "ISSEY MIYAKE", tag: "æ—¥æœ¬æ©Ÿå ´é¦–ç™»å ´", category: "æ™‚å°š" },
        { name: "KENZO", tag: "æ—¥æœ¬æ©Ÿå ´é¦–ç™»å ´", category: "æ™‚å°š" },
        { name: "ONITSUKA TIGER", tag: "", category: "é‹é¡" },
        { name: "AESOP", tag: "", category: "ç¾å¦" },
        { name: "MAISON KITSUNÃ‰", tag: "", category: "æ™‚å°š" }
    ],
    food: [
        { name: "åšå¤šãƒ©ãƒ¼ãƒ¡ãƒ³ å¹¸ã¡ã‚ƒã‚“", type: "åšå¤šæ‹‰éºµ" },
        { name: "åšå¤šé•·æµœæµ·é®®ä¸¼ ã†ã¿ã®é£Ÿå ‚", type: "æµ·é®®ä¸¼" },
        { name: "é‡œå–œåˆ©ã†ã©ã‚“", type: "çƒé¾éºµ" },
        { name: "å…ƒç¥–ã‚‚ã¤é‹ æ¥½å¤©åœ°", type: "ç‰›è…¸é‹" },
        { name: "å’Œå¿ƒã¨ã‚“ã‹ã¤ ã‚ã‚“ãš", type: "è±¬æ’" }
    ],
    souvenirs: [
        { name: "åšå¤šé€šã‚Šã‚‚ã‚“", desc: "åšå¤šå¿…è²·" },
        { name: "ä¸€è˜­æ‹‰éºµ", desc: "å¸¶å›å®¶ç…®" },
        { name: "æ±äº¬èŠ­å¨œå¨œ", desc: "æ—¥æœ¬å…¨åœ‹" },
        { name: "ç™½è‰²æˆ€äºº", desc: "åŒ—æµ·é“" }
    ],
    info: {
        dutyFreeArea: "ç´„6,000ã¡ï¼ˆåŸä¾†4å€ï¼‰",
        brands: "128å€‹å“ç‰Œï¼ˆ44æ–°å“ç‰Œï¼‰",
        openDate: "2025å¹´3æœˆ28æ—¥å…¨é¢é–‹å¹•"
    }
};


const drugstoreData = [
    {
        icon: "ğŸ¥‡",
        name: "ãƒ€ã‚¤ã‚³ã‚¯ãƒ‰ãƒ©ãƒƒã‚° å¤©ç¥è¥¿é€šã‚Šåº—",
        desc: "å…ç¨…10%ï¼‹æœ€é«˜8%æŠ˜æ‰£åˆ¸",
        addr: "å¤©ç¥è¥¿é€š",
        hours: "9:00-23:00",
        tag: "æœ€ä¾¿å®œ",
        map: "ãƒ€ã‚¤ã‚³ã‚¯ãƒ‰ãƒ©ãƒƒã‚° å¤©ç¥è¥¿é€šã‚Šåº—"
    },
    {
        icon: "ğŸ¥ˆ",
        name: "å”å‰è¨¶å¾· å¤©ç¥æœ¬åº—",
        desc: "ã€Œåœ°å€æœ€å®‰åƒ¹ã€ãƒ»å•†å“è¶…å¤š",
        addr: "å¤©ç¥2-6-35",
        hours: "24å°æ™‚",
        tag: "24Hç‡Ÿæ¥­",
        map: "ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†ç¦å²¡å¤©ç¥æœ¬åº—"
    },
    {
        icon: "ğŸ¥‰",
        name: "ãƒãƒ„ãƒ¢ãƒˆã‚­ãƒ¨ã‚· å¤©ç¥åœ°ä¸‹è¡—",
        desc: "å“é …é½Šå…¨ãƒ»å…ç¨…å°æ‡‰ãƒ»5%åˆ¸",
        addr: "å¤©ç¥åœ°ä¸‹è¡—",
        hours: "10:00-21:00",
        tag: "å“é …é½Šå…¨",
        map: "ãƒãƒ„ãƒ¢ãƒˆã‚­ãƒ¨ã‚· å¤©ç¥åœ°ä¸‹è¡—"
    },
    {
        icon: "ğŸ’Š",
        name: "ã‚³ã‚³ã‚«ãƒ©ãƒ•ã‚¡ã‚¤ãƒ³ PARCO",
        desc: "é†«è—¥å“ãƒ»å¥åº·é£Ÿå“ãƒ»åŒ–å¦å“",
        addr: "ç¦å²¡PARCOæ–°é¤¨B1F",
        hours: "10:00-21:00",
        tag: "å…ç¨…å°æ‡‰",
        map: "ã‚³ã‚³ã‚«ãƒ©ãƒ•ã‚¡ã‚¤ãƒ³ ç¦å²¡ãƒ‘ãƒ«ã‚³æ–°é¤¨"
    },
    {
        icon: "ğŸ’Š",
        name: "ãƒ‰ãƒ©ãƒƒã‚°æ–°ç”Ÿå ‚ å¤©ç¥å—åº—",
        desc: "åœ¨åœ°é€£é–ãƒ»ç‡Ÿæ¥­è‡³23æ™‚",
        addr: "å¤©ç¥å—",
        hours: "9:00-23:00",
        tag: "ç‡Ÿæ¥­åˆ°æ™š",
        map: "ãƒ‰ãƒ©ãƒƒã‚°æ–°ç”Ÿå ‚ å¤©ç¥å—åº—"
    }
];

// ç¦å²¡å¿…åƒç”œé»èˆ‡å’–å•¡
const dessertData = [
    { 
        icon: "ğŸ§€", 
        name: "BAKE CHEESE TART", 
        desc: "æ¿ƒèµ·å¸å¡å£«é”ãƒ»å¤–çš®é…¥è„†", 
        addr: "å¤©ç¥åœ°ä¸‹è¡—",
        tag: "ä¸‹åˆèŒ¶é¦–é¸",
        map: "BAKE CHEESE TART å¤©ç¥åœ°ä¸‹è¡—"
    },
    { 
        icon: "ğŸ¡", 
        name: "éˆ´æ‡¸", 
        desc: "ç¦å²¡è€å­—è™Ÿå’Œè“å­ãƒ»ç”ŸéŠ…é‘¼ç‡’", 
        addr: "åšå¤šç«™/å¤©ç¥ç™¾è²¨",
        tag: "ä¼´æ‰‹ç¦®å¿…è²·",
        map: "éˆ´æ‡¸ åšå¤šé§…"
    },
    { 
        icon: "ğŸ", 
        name: "å…«å¤©å ‚", 
        desc: "å†·è—å¥¶æ²¹éºµåŒ…ãƒ»æ¿•æ½¤ç¶¿å¯†", 
        addr: "åšå¤šç«™å•†å ´",
        tag: "å°æœ‹å‹æ„›",
        map: "å…«å¤©å ‚ åšå¤šé§…"
    },
    { 
        icon: "ğŸ“", 
        name: "ä¼Šéƒ½ãã‚“ã", 
        desc: "ç”˜ç‹è‰è“éŠ…é‘¼ç‡’ãƒ»è‰è“æ§å¿…è©¦", 
        addr: "åšå¤šç«™AMU",
        tag: "è‰è“æ§",
        map: "ä¼Šéƒ½ãã‚“ã åšå¤šãƒã‚¤ãƒ³ã‚°"
    },
    { 
        icon: "â˜•", 
        name: "BLUE BOTTLE", 
        desc: "ç¦å²¡å¤©ç¥åº—ãƒ»è­¦å›ºç¥ç¤¾æ—", 
        addr: "å¤©ç¥è­¦å›ºç¥ç¤¾æ—",
        tag: "8:00-20:00",
        map: "ãƒ–ãƒ«ãƒ¼ãƒœãƒˆãƒ«ã‚³ãƒ¼ãƒ’ãƒ¼ ç¦å²¡å¤©ç¥ã‚«ãƒ•ã‚§"
    },
    { 
        icon: "ğŸ¥§", 
        name: "åšå¤šé¢¨ç¾åºµ", 
        desc: "ç”˜ç‹è‰è“å¤¾å¿ƒé¤…ãƒ»åŒ…è£æ¼‚äº®", 
        addr: "æ©Ÿå ´/åšå¤šç«™",
        tag: "é€ç¦®é¦–é¸",
        map: "åšå¤šé¢¨ç¾åºµ"
    },
    { 
        icon: "ğŸ©", 
        name: "I'm donut?", 
        desc: "è¶…äººæ°£ç”Ÿç”œç”œåœˆï¼è“¬é¬†Qå½ˆ", 
        addr: "å¤©ç¥æ¸¡é‚Šé€š",
        tag: "æ’éšŠååº—",
        map: "I'm donut ç¦å²¡"
    },
    { 
        icon: "ğŸ¥", 
        name: "ä¸‰æ—¥æœˆå±‹", 
        desc: "å¤©ç„¶é…µæ¯å¯é Œãƒ»10+ç¨®å£å‘³", 
        addr: "åšå¤šç«™",
        tag: "å¯é Œå¿…è²·",
        map: "ä¸‰æ—¥æœˆå±‹ åšå¤šé§…åº—"
    },
    { 
        icon: "ğŸ", 
        name: "Dacomecca", 
        desc: "äººæ°£éº»ç²‰å’–å•¡åº—ãƒ»å¡å£«é”å¥¶æ²¹éºµåŒ…å¿…è²·", 
        addr: "åšå¤šç«™å‰4-14-1",
        tag: "7:00-20:00",
        map: "Dacomecca åšå¤š"
    },
    { 
        icon: "âœˆï¸", 
        name: "FUK COFFEE ç¥‡åœ’åº—", 
        desc: "æ©Ÿå ´ä¸»é¡Œå’–å•¡å»³ãƒ»æ˜­å’Œå¸ƒä¸å¿…é»", 
        addr: "ç¥‡åœ’ç”º6-22ï¼ˆæ«›ç”°ç¥ç¤¾å‰ç«™1åˆ†ï¼‰",
        tag: "è¶…äººæ°£ï¼",
        map: "FUK COFFEE ç¥‡åœ’"
    },
    { 
        icon: "ğŸ›«", 
        name: "FUK COFFEE Parks", 
        desc: "å¤§æ¿ å…¬åœ’æ—ãƒ»æ‚ é–’æ°›åœ", 
        addr: "å¤§æ¿ å…¬åœ’ç«™æ­¥è¡Œ3åˆ†",
        tag: "ä¸ç”¨æ’éšŠ",
        map: "FUK COFFEE Parks"
    },
    { 
        icon: "ğŸ°", 
        name: "ã‚­ãƒ«ãƒ•ã‚§ãƒœãƒ³", 
        desc: "ç²¾ç¾æ°´æœå¡”ååº—ãƒ»è¦–è¦ºå‘³è¦ºé›™äº«å—", 
        addr: "å¤©ç¥",
        tag: "ç¶²ç¾å¿…æ‹",
        map: "ã‚­ãƒ«ãƒ•ã‚§ãƒœãƒ³ ç¦å²¡"
    },
    { 
        icon: "ğŸ¨", 
        name: "æ°·è“å­å±‹KOMARU", 
        desc: "ç±³å…¶æ—ä¸»å»šç›£è£½è»Ÿé›ªç³•", 
        addr: "å¤©ç¥/åšå¤š",
        tag: "é«˜ç´šç”œé»",
        map: "æ°·è“å­å±‹KOMARU ç¦å²¡"
    },
    { 
        icon: "ğŸ®", 
        name: "ç”˜å‘³å‡¦ãŸãã‚€ã‚‰", 
        desc: "å®‡æ²»æŠ¹èŒ¶åˆ¨å†°ãƒ»çƒ¤ç³°å­", 
        addr: "å¤©ç¥",
        tag: "å’Œé¢¨ç”œé»",
        map: "ç”˜å‘³å‡¦ãŸãã‚€ã‚‰ ç¦å²¡"
    },
    { 
        icon: "ğŸ¥§", 
        name: "ãƒ•ãƒ©ãƒ³ã‚¹è“å­16åŒº", 
        desc: "ç¶“å…¸æ³•å¼ç”œé»è€èˆ–", 
        addr: "è—¥é™¢å¤§é€š",
        tag: "æ³•å¼ç”œé»",
        map: "ãƒ•ãƒ©ãƒ³ã‚¹è“å­16åŒº"
    }
];

// ç¦å²¡ç•¶å­£æ°´æœï¼ˆ2æœˆæ¨è–¦ï¼‰
const strawberryData = {
    featured: {
        name: "ç”˜ç‹è‰è“",
        japanese: "ã‚ã¾ãŠã† (Amaou)",
        origin: "ç¦å²¡ç¸£ç¨å®¶ç”Ÿç”¢",
        season: "12æœˆ~5æœˆï¼ˆ1-2æœˆæœ€ä½³ï¼‰",
        sweetness: "11åº¦ä»¥ä¸Š",
        meaning: "ã‚(ç´…)ãƒ»ã¾(åœ“)ãƒ»ãŠ(å¤§)ãƒ»ã†(ç”œ)",
        features: ["æœå¯¦è¶…å¤§é¡†", "åœ“æ½¤é£½æ»¿", "å¤šæ±ç”œåº¦é«˜", "è‰è“ä¹‹ç‹"],
        tips: ["å¾è’‚é ­é–‹å§‹åƒï¼ˆå°–ç«¯æœ€ç”œï¼‰", "ä¸éœ€æ²¾é†¬ç›´æ¥äº«ç”¨", "å†·è—ä¿å­˜2-3å¤©å…§åƒå®Œ"]
    },
    comparison: [
        { name: "ç”˜ç‹", origin: "ç¦å²¡", feature: "å¤§é¡†åœ“æ½¤ãƒ»è¶…ç”œå¤šæ±", rating: 5 },
        { name: "æ ƒä¹™å¥³", origin: "æ ƒæœ¨", feature: "ç”œé…¸å¹³è¡¡ãƒ»æ±æ—¥æœ¬ç¬¬ä¸€", rating: 4 },
        { name: "ç´…è‡‰é °", origin: "éœå²¡", feature: "é¦™æ°£æ¿ƒéƒãƒ»å£æ„Ÿç´®å¯¦", rating: 4 }
    ],
    whereToBuy: [
        { place: "MaxValu Express åšå¤šç¥‡åœ’åº—", note: "24Hãƒ»åƒ¹æ ¼å¯¦æƒ " },
        { place: "åšå¤šç«™åœ°ä¸‹è¡—", note: "å¤šå®¶æ°´æœå°ˆè³£åº—" },
        { place: "å²©ç”°å±‹/å¤§ä¸¸ç™¾è²¨", note: "ç¦®ç›’åŒ…è£ãƒ»é€ç¦®é¦–é¸" },
        { place: "ä¼Šéƒ½ãã‚“ã", note: "ç”˜ç‹è‰è“éŠ…é‘¼ç‡’ï¼" }
    ]
};

// å¿…è²·ä¼´æ‰‹ç¦®ï¼ˆæ•´åˆæ›´æ–°ï¼‰
const souvenirData = [
    { icon: "ğŸ™", name: "åšå¤šé€šã‚Šã‚‚ã‚“", desc: "ç¦å²¡ä»£è¡¨éŠ˜è“ãƒ»å¥¶æ²¹ç™½è±†æ²™", where: "æ©Ÿå ´/è»Šç«™/ç™¾è²¨" },
    { icon: "ğŸ¡", name: "ç­‘ç´«ã‚‚ã¡", desc: "å¦‚æ°´åºµãƒ»æ·‹é»‘ç³–èœœè£¹é»ƒè±†ç²‰", where: "æ©Ÿå ´/åšå¤šç«™" },
    { icon: "ğŸª", name: "ã‚ã‚“ã¹ã„", desc: "æ˜å¤ªå­ä»™è²ãƒ»é¹¹é¦™å¾®è¾£", where: "æ©Ÿå ´/åšå¤šç«™" },
    { icon: "ğŸ­", name: "äºŒâ—¯åŠ ç…é¤…", desc: "åƒé³¥å±‹ãƒ»é€ å‹æœ‰è¶£", where: "æ©Ÿå ´/ç™¾è²¨" },
    { icon: "ğŸ§ˆ", name: "Press Butter Sand", desc: "åšå¤šé™å®šç”˜ç‹è‰è“å£å‘³", where: "åšå¤šç«™/æ©Ÿå ´" },
    { icon: "ğŸ“", name: "ç”˜ç‹è‰è“ç³»åˆ—", desc: "é¤…ä¹¾è›‹ç³•æœå‡ãƒ»åšå¤šé™å®š", where: "æ©Ÿå ´/åšå¤šç«™" },
    { icon: "ğŸ«", name: "åšå¤šã®çŸ³ç•³", desc: "æŠ¹èŒ¶å·§å…‹åŠ›è›‹ç³•", where: "åšå¤šç«™AMU" },
    { icon: "ğŸ¤", name: "ã²ã‚ˆå­è›‹ç³•", desc: "å°é›é€ å‹ãƒ»é»ƒè±†æ²™", where: "æ©Ÿå ´/åšå¤šç«™" }
];

// æ¡ƒåœ’æ©Ÿå ´åœè»Šè³‡æ–™ï¼ˆåœ‹æ³°å°æ¨¹é»æŠ˜æŠµï¼‰
const taoyuanParkingData = {
    info: {
        title: "æ¡ƒåœ’æ©Ÿå ´å¤–åœåœè»Š",
        subtitle: "åœ‹æ³°å°æ¨¹é»æŠ˜æŠµ",
        note: "å‡ºç™¼å‰è¨˜å¾—åœ¨åœ‹æ³° App å…Œæ›åœè»Šåˆ¸ï¼"
    },
    lots: [
        {
            name: "å¤§åœ’åœè»Šå ´",
            addr: "å¤§åœ’å€ä¸­æ­£æ±è·¯é™„è¿‘",
            shuttle: "24H æ¥é§è‡³æ¡ƒæ©Ÿ",
            points: "130é»/æ—¥",
            note: "åœ‹æ³°åˆä½œåœè»Šå ´ãƒ»æ¨è–¦",
            recommended: true,
            map: "å¤§åœ’åœè»Šå ´ æ¡ƒåœ’æ©Ÿå ´"
        },
        {
            name: "é€£çµ±åœè»Šå ´",
            addr: "å¤§åœ’å€",
            shuttle: "æ¥é§è‡³æ¡ƒæ©Ÿ",
            points: "145é»/æ—¥",
            note: "åœ‹æ³°åˆä½œåœè»Šå ´",
            recommended: false,
            map: "é€£çµ±åœè»Šå ´ æ¡ƒåœ’æ©Ÿå ´"
        }
    ],
    excluded: ["é€£å‹åœè»Šå ´", "æ—¥æœˆäº­åœè»Šå ´"],
    tips: [
        "ğŸŒ³ å°æ¨¹é»å…Œæ›ï¼šåœ‹æ³°App â†’ é»æ•¸å…Œæ› â†’ åœè»Šå„ªæƒ ",
        "â° å»ºè­°å‡ºç™¼å‰1-2å¤©å…Œæ›å®Œæˆ",
        "ğŸš— åœå¥½è»Šå¾Œæ­å…è²»æ¥é§è»Šè‡³èˆªå»ˆ",
        "ğŸ“± è¨˜å¾—æˆªåœ–å…Œæ›æ†‘è­‰å‚™ç”¨",
        "âš ï¸ é€£å‹ã€æ—¥æœˆäº­åœè»Šå ´ä¸é©ç”¨å°æ¨¹é»"
    ]
};

// åœ°éµäº¤é€šè³‡æ–™
const metroData = {
    stations: [
        { line: "ğŸŸ  ç©ºæ¸¯ç·š", name: "å¤©ç¥é§…", exit: "5è™Ÿ/6aè™Ÿå‡ºå£", distance: "æ­¥è¡Œ3åˆ†é˜", note: "æœ€è¿‘ï¼" },
        { line: "ğŸŸ¢ ä¸ƒéšˆç·š", name: "å¤©ç¥å—é§…", exit: "è¥¿8å‡ºå£", distance: "æ­¥è¡Œ5åˆ†é˜", note: "å¾€è—¥é™¢" },
        { line: "ğŸšƒ è¥¿éµé›»è»Š", name: "è¥¿é‰„ç¦å²¡é§…", exit: "â€”", distance: "ç›´çµ", note: "å¾€å¤ªå®°åºœ" }
    ],
    routes: [
        { dest: "ç¦å²¡æ©Ÿå ´", line: "ğŸŸ ", time: "11åˆ†", fare: "Â¥260" },
        { dest: "åšå¤šç«™", line: "ğŸŸ ", time: "5åˆ†", fare: "Â¥210" },
        { dest: "ä¸­æ´²å·ç«¯ï¼ˆå±‹å°ï¼‰", line: "ğŸŸ ", time: "3åˆ†", fare: "Â¥210" },
        { dest: "å¤§æ¿ å…¬åœ’", line: "ğŸŸ ", time: "5åˆ†", fare: "Â¥210" },
        { dest: "å”äººç”ºï¼ˆç¦å²¡å¡”å·´å£«ï¼‰", line: "ğŸŸ ", time: "7åˆ†", fare: "Â¥260" },
        { dest: "è—¥é™¢ï¼ˆç”œé»è¡—ï¼‰", line: "ğŸŸ¢", time: "4åˆ†", fare: "Â¥210" }
    ],
    tickets: [
        { name: "å–®ç¨‹ç¥¨", price: "Â¥210~380", note: "ä¾è·é›¢" },
        { name: "1æ—¥ä¹˜è»Šåˆ¸", price: "Â¥640", note: "3æ¬¡ä»¥ä¸Šåˆ’ç®—ï¼" },
        { name: "ä¿¡ç”¨å¡è§¸ç¢°", price: "ä¸Šé™Â¥640", note: "è¶…éè‡ªå‹•è®Š1æ—¥åˆ¸" }
    ]
};

// å‘¨éŠåˆ¸è³‡æ–™
const passData = [
    {
        icon: "ğŸ†",
        name: "å¤ªå®°åºœãƒ»æŸ³å·è§€å…‰å¥—ç¥¨",
        price: "Â¥3,210~3,380",
        includes: "å¤©ç¥â‡„å¤ªå®°åºœâ‡„æŸ³å·é›»è»Š + æŸ³å·éŠèˆ¹",
        useDay: "Day 3ï¼ˆå¤ªå®°åºœï¼‹æŸ³å·ï¼‰",
        save: "çœç´„ Â¥1,000~1,500",
        recommended: true
    },
    {
        icon: "ğŸš‡",
        name: "åœ°ä¸‹éµ 1æ—¥ä¹˜è»Šåˆ¸",
        price: "Â¥640",
        includes: "å…¨3ç·šç„¡é™æ­ä¹˜",
        useDay: "æ­3æ¬¡ä»¥ä¸Šçš„æ—¥å­",
        save: "å–®ç¨‹ Â¥210 Ã— 3 = Â¥630",
        recommended: false
    },
    {
        icon: "ğŸš•",
        name: "æ©Ÿå ´â‡„å¤©ç¥ è¨ˆç¨‹è»Š",
        price: "Â¥3,000~3,500",
        includes: "ç´„20-30åˆ†è»Šç¨‹ãƒ»ç›´é”é£¯åº—",
        useDay: "Day 1 æŠµé”",
        save: "æœ‰å°å­©/è¡Œææœ€æ–¹ä¾¿",
        recommended: true
    }
];

// å¤œç”Ÿæ´»æ¨è–¦
const nightlifeData = {
    izakaya: [
        { icon: "ğŸœ", name: "å°é‡‘ã¡ã‚ƒã‚“", desc: "ç„¼ããƒ©ãƒ¼ãƒ¡ãƒ³ç™¼æºåœ°", loc: "å¤©ç¥", map: "å±‹å° å°é‡‘ã¡ã‚ƒã‚“", tag: "å¿…åƒ" },
        { icon: "ğŸ²", name: "ä¸€æ…¶ è¥¿ä¸­æ´²åº—", desc: "éš±è—ç‰ˆç‚™ç‡’ç‰›è…¸é‹", loc: "ä¸­æ´²", map: "ä¸€æ…¶ è¥¿ä¸­æ´²åº—", tag: "ç‰›è…¸é‹" },
        { icon: "ğŸŸ", name: "ã›ã„ã‚‚ã‚“æ‰•ã„", desc: "æ–°é®®åˆºèº«æµ·é®®", loc: "ä¸­æ´²", map: "ã›ã„ã‚‚ã‚“æ‰•ã„ ä¸­æ´²", tag: "æµ·é®®" },
        { icon: "ğŸ”¥", name: "è—ç„¼ ã¿ã‹ã‚“", desc: "è—ç„¼é°¹é­šãƒ»å’Œé¢¨å±…é…’å±‹", loc: "å¤©ç¥", map: "è—ç„¼ ã¿ã‹ã‚“ å¤©ç¥", tag: "è—ç„¼" }
    ],
    bars: [
        { icon: "ğŸ¥ƒ", name: "ãƒãƒ¼ãƒˆãƒ»ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹", desc: "30å¹´è€èˆ—ãƒ»No Charge", loc: "ä¸­æ´²", map: "ãƒãƒ¼ãƒˆã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ ä¸­æ´²", tag: "è€èˆ—" },
        { icon: "ğŸ¸", name: "Bar Oscar", desc: "æ—¥æœ¬å† è»èª¿é…’å¸«ãƒ»ã€Œæ—¥ãƒå’Œã€å¿…é»", loc: "å¤©ç¥èµ¤å‚", map: "ãƒãƒ¼ ã‚ªã‚¹ã‚«ãƒ¼ èµ¤å‚", tag: "äººæ°£" },
        { icon: "ğŸ¥‚", name: "ãƒã‚¤ãƒœãƒ¼ãƒ«ãƒãƒ¼ 1923", desc: "é«˜ç´šHighballãƒ»çœ‹ä¸­æ´²å¤œæ™¯", loc: "ä¸­æ´²", map: "ãƒã‚¤ãƒœãƒ¼ãƒ«ãƒãƒ¼ ä¸­æ´²1923", tag: "å¤œæ™¯" }
    ]
};

// è¦ªå­å‹å–„å»æ‰€è³‡æ–™
const babyRoomData = {
    tenjin: [
        { name: "å²©ç”°å±‹æœ¬åº—", floor: "æœ¬é¤¨6F", diaper: 3, nursing: 4, extras: ["ç†±æ°´", "å¾®æ³¢çˆ", "é›¢ä¹³é£Ÿè²©è³£æ©Ÿ", "Stokkeæ¤…"], recommended: true, map: "å²©ç”°å±‹æœ¬åº— ç¦å²¡" },
        { name: "å¤©ç¥åœ°ä¸‹è¡—", floor: "å—ç«¯12ç•ªè¡—", diaper: 2, nursing: 2, extras: ["ç†±æ°´80Â°C", "è‡ªå‹•é–€"], recommended: false, map: "å¤©ç¥åœ°ä¸‹è¡— æˆä¹³å®¤" },
        { name: "å¤§ä¸¸ç¦å²¡å¤©ç¥åº—", floor: "æœ¬é¤¨7F", diaper: 2, nursing: 2, extras: ["ä¹¾æ·¨"], recommended: false, map: "å¤§ä¸¸ç¦å²¡å¤©ç¥åº—" },
        { name: "ç¦å²¡PARCO", floor: "æœ¬é¤¨6F", diaper: 2, nursing: 2, extras: ["å¯æ„›æ’ç•«"], recommended: false, map: "ç¦å²¡ãƒ‘ãƒ«ã‚³" }
    ],
    hakata: [
        { name: "åšå¤šé˜ªæ€¥", floor: "7F", diaper: 9, nursing: 4, extras: ["ç†±æ°´", "å¾®æ³¢çˆ", "å°¿å¸ƒè²©è³£æ©Ÿ", "ä¿å¥å¸«"], recommended: true, map: "åšå¤šé˜ªæ€¥" },
        { name: "ãƒ‡ã‚¤ãƒˆã‚¹", floor: "B1F", diaper: 3, nursing: 3, extras: ["å¯ä¸Ÿç”¨éå°¿å¸ƒ"], recommended: false, map: "ãƒ‡ã‚¤ãƒˆã‚¹ åšå¤š" },
        { name: "KITTEåšå¤š", floor: "6F/10F", diaper: 2, nursing: 2, extras: ["å¬°å…’åºŠ"], recommended: false, map: "KITTEåšå¤š" }
    ]
};


// è¡Œææ¸…å–®
const packingData = {
    "ğŸ‘• è¡£ç‰©": ["åšç¾½çµ¨å¤–å¥—", "æ¯›è¡£x3", "é•·è¤²x3", "ç™¼ç†±è¡£x4", "åœå·¾", "æ‰‹å¥—", "æ¯›å¸½"],
    "ğŸ§´ ç›¥æ´—": ["ç‰™åˆ·ç‰™è†", "æ´—é¢ä¹³", "ä¿é¤Šå“", "é˜²æ›¬"],
    "ğŸ“± é›»å­": ["æ‰‹æ©Ÿå……é›»å™¨", "è¡Œå‹•é›»æº", "è½‰æ¥é ­", "WiFiæ©Ÿ"],
    "ğŸ“„ è­‰ä»¶": ["è­·ç…§", "æ©Ÿç¥¨", "è¨‚æˆ¿ç¢ºèª", "æ—¥å¹£ç¾é‡‘", "ä¿¡ç”¨å¡"],
    "ğŸ’Š è—¥å“": ["å¸¸å‚™è—¥", "OKç¹ƒ", "è…¸èƒƒè—¥"]
};

// è¨˜å¸³é¡åˆ¥
const expenseCategories = [
    { id: 'food', icon: 'ğŸœ', name: 'é¤é£²' },
    { id: 'transport', icon: 'ğŸšƒ', name: 'äº¤é€š' },
    { id: 'shopping', icon: 'ğŸ›ï¸', name: 'è³¼ç‰©' },
    { id: 'ticket', icon: 'ğŸ«', name: 'é–€ç¥¨' },
    { id: 'hotel', icon: 'ğŸ¨', name: 'ä½å®¿' },
    { id: 'other', icon: 'ğŸ“¦', name: 'å…¶ä»–' }
];

// ===== APP åˆå§‹åŒ– =====
let currentDay = 0;
let expenses = JSON.parse(localStorage.getItem('fukuoka-expenses') || '[]');

document.addEventListener('DOMContentLoaded', () => {
    initCountdown();
    renderParking();
    renderFlights();
    renderHotel();
    renderDaySelector();
    renderDayDetail(0);
    renderFoodScroll();
    addNearbySection();
    addSouvenirSection();
    addShoppingSection();
    addDrugstoreSection();
    add100YenSection();
    addClothingSection();
    addJinsSection();
    addMounjaroSection();
    addDessertSection();
    addStrawberrySection();
    addMetroSection();
    addTransportMapsSection();
    renderPacking();
    initBottomNav();
    updateProgress();
    addExpenseSection();
    addSplitBillSection();
    addNightlifeSection();
    addBabyRoomSection();
    addArcadeSection();
    addAirportShopSection();
    addHotelAreaMapSection();
    addVisualMapSection();
    addDayTripsSection();
    addEmergencySection();
    addPhrasesSection();
});

// ===== å€’æ•¸è¨ˆæ™‚ =====
function initCountdown() {
    updateCountdown();
    setInterval(updateCountdown, 60000);
}

function updateCountdown() {
    const now = new Date();
    const diff = TRIP_START - now;
    
    if (diff > 0) {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        
        document.getElementById('countDays').textContent = days;
        document.getElementById('countHours').textContent = hours;
        document.getElementById('countMins').textContent = mins;
    } else {
        document.getElementById('countDays').textContent = 'ğŸ‰';
        document.getElementById('countHours').textContent = 'æ—…';
        document.getElementById('countMins').textContent = 'è¡Œä¸­';
    }
}

// ===== åœè»Šè³‡è¨Š =====
function renderParking() {
    const container = document.getElementById('parkingCards');
    if (!container) return;
    
    container.innerHTML = `
        <div class="parking-grid">
            ${taoyuanParkingData.lots.map(lot => `
                <div class="parking-card ${lot.recommended ? 'recommended' : ''}">
                    <div class="parking-header">
                        <h4>${lot.name} ${lot.recommended ? '<span class="parking-rec">â­æ¨è–¦</span>' : ''}</h4>
                    </div>
                    <div class="parking-details">
                        <p class="parking-addr">ğŸ“ ${lot.addr}</p>
                        <p class="parking-shuttle">ğŸšŒ ${lot.shuttle}</p>
                        <p class="parking-points">ğŸŒ³ ${lot.points}</p>
                        <p class="parking-note">ğŸ’¡ ${lot.note}</p>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lot.map)}" 
                       target="_blank" class="parking-nav-btn">
                        ğŸ—ºï¸ å°èˆªå‰å¾€
                    </a>
                </div>
            `).join('')}
        </div>
        <div class="parking-tips-box">
            <h4>ğŸ“‹ å…Œæ›æ­¥é©Ÿ</h4>
            ${taoyuanParkingData.tips.map(tip => `<p>${tip}</p>`).join('')}
        </div>
    `;
    
    // åŠ å…¥æ¨£å¼
    const style = document.createElement('style');
    style.textContent = `
        .section-subtitle {
            font-size: 0.85rem;
            color: var(--secondary);
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
        }
        .parking-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 12px;
        }
        #parking-info .parking-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px;
            border: var(--border-width) solid var(--border);
        }
        #parking-info .parking-card.recommended {
            background: linear-gradient(135deg, rgba(76,175,80,0.15) 0%, rgba(139,195,74,0.1) 100%);
            border-color: #4CAF50;
        }
        #parking-info .parking-header {
            margin-bottom: 10px;
        }
        #parking-info .parking-header h4 {
            font-size: 1rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .parking-rec {
            font-size: 0.7rem;
            color: #4CAF50;
            font-weight: 700;
        }
        .parking-details p {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        .parking-details .parking-points {
            color: #4CAF50;
            font-weight: 700;
        }
        .parking-details .parking-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-style: italic;
        }
        .parking-nav-btn {
            display: block;
            text-align: center;
            background: #4CAF50;
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            padding: 10px;
            border-radius: var(--radius-sm);
            text-decoration: none;
            margin-top: 10px;
            border: var(--border-width) solid var(--border);
            box-shadow: 2px 2px 0 var(--border);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .parking-nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 4px 4px 0 var(--border);
        }
        .parking-nav-btn:active {
            transform: translateY(0);
            box-shadow: 2px 2px 0 var(--border);
        }
        .parking-tips-box {
            background: rgba(76,175,80,0.1);
            border-radius: var(--radius);
            padding: 12px 14px;
            border: 1px dashed #4CAF50;
        }
        .parking-tips-box h4 {
            font-size: 0.85rem;
            font-weight: 900;
            color: #4CAF50;
            margin-bottom: 8px;
        }
        .parking-tips-box p {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        .parking-tips-box p:last-child {
            margin-bottom: 0;
        }
    `;
    document.head.appendChild(style);
}

// ===== èˆªç­ =====
function renderFlights() {
    const container = document.getElementById('flightCards');
    container.innerHTML = `
        <div class="flight-card">
            <div class="flight-header">
                <span class="flight-type">å»ç¨‹</span>
                <span class="airline">ğŸ¯ å°ç£è™èˆª IT240</span>
            </div>
            <div class="flight-route">
                <div class="airport"><span class="time">06:45</span><span class="code">TPE</span><span class="name">æ¡ƒåœ’ T1</span></div>
                <div class="flight-line"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg></div>
                <div class="airport"><span class="time">10:00</span><span class="code">FUK</span><span class="name">ç¦å²¡</span></div>
            </div>
            <div class="flight-date">2026/02/08 (æ—¥)</div>
        </div>
        <div class="flight-card return">
            <div class="flight-header">
                <span class="flight-type">å›ç¨‹</span>
                <span class="airline">âœˆï¸ äºæ´²èˆªç©º AK1511</span>
            </div>
            <div class="flight-route">
                <div class="airport"><span class="time">18:00</span><span class="code">FUK</span><span class="name">ç¦å²¡</span></div>
                <div class="flight-line"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg></div>
                <div class="airport"><span class="time">19:30</span><span class="code">TPE</span><span class="name">æ¡ƒåœ’</span></div>
            </div>
            <div class="flight-date">2026/02/15 (æ—¥)</div>
        </div>
    `;
}

// ===== é…’åº— =====
function renderHotel() {
    const container = document.getElementById('hotelCard');
    container.innerHTML = `
        <div class="hotel-main">
            <div class="hotel-info">
                <h3>Il Palazzo</h3>
                <p class="en">ãƒ›ãƒ†ãƒ« ã‚¤ãƒ«ãƒ»ãƒ‘ãƒ©ãƒƒãƒ„ã‚©</p>
                <p class="addr">ğŸ“ ç¦å²¡å¸‚ä¸­å¤®å€æ˜¥å‰3-13-1</p>
                <p class="hotel-access">ğŸš‡ ä¸­æ´²å·ç«¯ç«™æ­¥è¡Œ5åˆ†</p>
                <p class="hotel-access">ğŸš¶ å¤©ç¥ç«™æ­¥è¡Œ10åˆ†</p>
                <p class="hotel-access">ğŸ® ä¸­æ´²å±‹å°è¡—æ­¥è¡Œ3åˆ†</p>
                <p class="hotel-checkin">ğŸ•“ å…¥ä½ 16:00 ï½œ é€€æˆ¿ 12:00</p>
            </div>
        </div>
        
        <div class="hotel-family-section">
            <h4>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ è¦ªå­è¨­æ–½è³‡è¨Š</h4>
            <div class="family-features">

                <div class="family-item good">
                    <span class="family-icon">â˜•</span>
                    <div class="family-text">
                        <strong>å…è²»è¿è³“ä¸‹åˆèŒ¶</strong>
                        <p>å…¥ä½é€å®¢æˆ¿ä¸‰å±¤å¼ä¸‹åˆèŒ¶</p>
                    </div>
                </div>
                <div class="family-item good">
                    <span class="family-icon">ğŸ¸</span>
                    <div class="family-text">
                        <strong>1Fæ²³ç•”é¤å»³é…’å§</strong>
                        <p>MITSUBACHIãƒ»å¯è³ä¸­æ´²å¤œæ™¯</p>
                    </div>
                </div>
                <div class="family-item good">
                    <span class="family-icon">ğŸ›—</span>
                    <div class="family-text">
                        <strong>é›»æ¢¯ & 24Hæ«ƒå°</strong>
                        <p>æ¨è»Šç„¡éšœç¤™ãƒ»å…¨å¤©å€™æœå‹™</p>
                    </div>
                </div>

                <div class="family-item note">
                    <span class="family-icon">ğŸ’°</span>
                    <div class="family-text">
                        <strong>å…’ç«¥æ”¶è²»æ”¿ç­–</strong>
                        <p>12æ­²ä»¥ä¸‹å…è²»ï¼ˆä¸åŠ åºŠï¼‰ãƒ»13æ­²ä»¥ä¸Šæˆäººåƒ¹</p>
                    </div>
                </div>
                <div class="family-item note">
                    <span class="family-icon">ğŸ³</span>
                    <div class="family-text">
                        <strong>æ—©é¤è³‡è¨Š</strong>
                        <p>Hotel Il Palazzo B1Fã€ŒEL DORADOã€</p>
                        <p>â° 7:00-11:00 ï½œ ğŸ’° Â¥4,500/äºº</p>
                        <p>å’Œæ´‹è‡ªåŠ©é¤ç´„70ç¨®ãƒ»æ­¥è¡Œ1åˆ†é˜</p>
                    </div>
                </div>
            </div>
            <div class="nearby-baby-tip">
                <span class="tip-icon">ğŸ‘¶</span>
                <span>é™„è¿‘è¦ªå­å»æ‰€ï¼šå²©ç”°å±‹æœ¬åº—6Fï¼ˆæœ€å®Œå–„ï¼‰ã€å¤©ç¥åœ°ä¸‹è¡—å—ç«¯12ç•ªè¡—</span>
            </div>
        </div>
        
        <div class="hotel-actions">
            <a href="https://www.google.com/maps/search/?api=1&query=Hotel+Il+Palazzo+ç¦å²¡" target="_blank" class="btn btn-secondary">ğŸ—ºï¸ åœ°åœ–</a>
            <a href="https://www.booking.com/hotel/jp/il-palazzo.html" target="_blank" class="btn btn-accent">ğŸ“… Booking</a>
        </div>
    `;
    
    // è¦ªå­è¨­æ–½æ¨£å¼
    const style = document.createElement('style');
    style.textContent = `
        .hotel-family-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px dashed var(--border);
        }
        .hotel-family-section h4 {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--primary);
        }
        .family-features {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
        }
        .family-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 12px;
            background: var(--bg-elevated);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--secondary);
        }
        .family-item.good {
            border-left-color: var(--secondary);
        }
        .family-item.warn {
            border-left-color: var(--orange);
            background: rgba(245, 158, 11, 0.1);
        }
        .family-item.note {
            border-left-color: var(--text-muted);
        }
        .family-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        .family-text strong {
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 2px;
        }
        .family-text p {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin: 0;
        }
        .nearby-baby-tip {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-top: 12px;
            padding: 10px 12px;
            background: linear-gradient(135deg, rgba(255,113,206,0.1) 0%, rgba(1,205,254,0.1) 100%);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        .tip-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }
    `;
    document.head.appendChild(style);
}

// ===== æ—¥æœŸé¸æ“‡ =====
function renderDaySelector() {
    const container = document.getElementById('daySelector');
    container.innerHTML = itineraryData.map((d, i) => `
        <button class="day-btn ${i === 0 ? 'active' : ''}" onclick="selectDay(${i})">
            <span class="num">D${d.day}</span>
            <span class="date">${d.date}</span>
        </button>
    `).join('');
}

function selectDay(index) {
    currentDay = index;
    document.querySelectorAll('.day-btn').forEach((btn, i) => {
        btn.classList.toggle('active', i === index);
    });
    renderDayDetail(index);
    updateProgress();
}

// ===== è¡Œç¨‹è©³æƒ… =====
function renderDayDetail(index) {
    const day = itineraryData[index];
    const container = document.getElementById('dayDetail');
    const checked = JSON.parse(localStorage.getItem('fukuoka-checked') || '{}');
    
    container.innerHTML = `
        <div class="day-header">
            <span class="day-icon">${day.icon}</span>
            <div class="day-meta">
                <h3>Day ${day.day} - ${day.theme}</h3>
                <p>${day.date} (${day.weekday})</p>
                <p class="weather">${day.weather}</p>
            </div>
        </div>
        <div class="schedule-list">
            ${day.schedule.map((item, i) => {
                const key = `d${day.day}-${i}`;
                const isChecked = checked[key];
                const tagHtml = item.tag === 'lunch' ? '<span class="tag tag-lunch">åˆé¤</span>' :
                               item.tag === 'food' ? '<span class="tag tag-food">ç¾é£Ÿ</span>' :
                               item.tag === 'gundam' ? '<span class="tag tag-gundam">é‹¼å½ˆ</span>' : '';
                const mapHtml = item.map ? `
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map)}" 
                       target="_blank" class="map-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        å°èˆª
                    </a>` : '';
                
                return `
                    <div class="schedule-item">
                        <span class="schedule-time">${item.time}</span>
                        <div class="schedule-body">
                            <div class="schedule-title">${item.title} ${tagHtml}</div>
                            <p class="schedule-desc">${item.desc}</p>
                            <div class="schedule-actions">${mapHtml}</div>
                        </div>
                        <button class="check-btn ${isChecked ? 'checked' : ''}" onclick="toggleCheck('${key}', this)">âœ“</button>
                    </div>
                `;
            }).join('')}
        </div>
    `;
}

function toggleCheck(key, btn) {
    const checked = JSON.parse(localStorage.getItem('fukuoka-checked') || '{}');
    checked[key] = !checked[key];
    localStorage.setItem('fukuoka-checked', JSON.stringify(checked));
    btn.classList.toggle('checked');
    updateProgress();
}

function updateProgress() {
    const checked = JSON.parse(localStorage.getItem('fukuoka-checked') || '{}');
    const day = itineraryData[currentDay];
    const total = day.schedule.length;
    let done = 0;
    day.schedule.forEach((_, i) => {
        if (checked[`d${day.day}-${i}`]) done++;
    });
    const pct = total > 0 ? (done / total) * 100 : 0;
    document.getElementById('progressFill').style.width = `${pct}%`;
}

// ===== ç¾é£Ÿ =====
function renderFoodScroll() {
    const container = document.getElementById('foodScroll');
    container.innerHTML = foodData.map(f => `
        <div class="food-card">
            <div class="food-icon">${f.icon}</div>
            <h4>${f.name}</h4>
            <p>${f.shops}</p>
        </div>
    `).join('');
}

// ===== è¡Œææ¸…å–® =====
function renderPacking() {
    const container = document.getElementById('packingGrid');
    const checked = JSON.parse(localStorage.getItem('fukuoka-packing') || '{}');
    
    container.innerHTML = Object.entries(packingData).map(([cat, items]) => `
        <div class="packing-category">
            <h4>${cat}</h4>
            <div class="packing-items">
                ${items.map(item => {
                    const key = `p-${item}`;
                    const isChecked = checked[key];
                    return `
                        <label class="packing-item ${isChecked ? 'checked' : ''}" onclick="togglePacking('${key}', this)">
                            <span class="packing-check">âœ“</span>
                            <span>${item}</span>
                        </label>
                    `;
                }).join('')}
            </div>
        </div>
    `).join('');
    
    updatePackingProgress();
}

function togglePacking(key, label) {
    const checked = JSON.parse(localStorage.getItem('fukuoka-packing') || '{}');
    checked[key] = !checked[key];
    localStorage.setItem('fukuoka-packing', JSON.stringify(checked));
    label.classList.toggle('checked');
    updatePackingProgress();
}

function updatePackingProgress() {
    const checked = JSON.parse(localStorage.getItem('fukuoka-packing') || '{}');
    const total = Object.values(packingData).flat().length;
    const done = Object.values(checked).filter(v => v).length;
    document.getElementById('packingCount').textContent = `${done}/${total}`;
    document.getElementById('packingFill').style.width = `${(done/total)*100}%`;
}

// ===== åº•éƒ¨å°èˆª =====
function initBottomNav() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', (e) => {
            navItems.forEach(n => n.classList.remove('active'));
            item.classList.add('active');
        });
    });
}

// ===== è¨˜å¸³åŠŸèƒ½ =====
function addExpenseSection() {
    const mainContent = document.querySelector('.main-content');
    const packingSection = document.getElementById('packing');
    
    const expenseSection = document.createElement('section');
    expenseSection.className = 'section';
    expenseSection.id = 'expense';
    expenseSection.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ’°</span>æ—…éŠè¨˜å¸³</h2>
        <div class="expense-summary" id="expenseSummary"></div>
        <button class="btn btn-primary add-expense-btn" onclick="openExpenseModal()">+ æ–°å¢æ”¯å‡º</button>
        <div class="expense-list" id="expenseList"></div>
    `;
    
    mainContent.insertBefore(expenseSection, packingSection);
    renderExpenses();
    
    // æ–°å¢è¨˜å¸³ Modal
    const modal = document.createElement('div');
    modal.id = 'expenseModal';
    modal.className = 'modal';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ–°å¢æ”¯å‡º</h3>
                <button class="modal-close" onclick="closeExpenseModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>æ—¥æœŸ</label>
                    <select id="expenseDay">
                        ${itineraryData.map(d => `<option value="${d.day}">Day ${d.day} (${d.date})</option>`).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label>é¡åˆ¥</label>
                    <div class="category-grid">
                        ${expenseCategories.map(c => `
                            <label class="category-option">
                                <input type="radio" name="category" value="${c.id}">
                                <span>${c.icon} ${c.name}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
                <div class="form-group">
                    <label>é‡‘é¡ (Â¥)</label>
                    <input type="number" id="expenseAmount" placeholder="0" inputmode="numeric">
                </div>
                <div class="form-group">
                    <label>å‚™è¨»</label>
                    <input type="text" id="expenseNote" placeholder="ä¾‹ï¼šä¸€è˜­æ‹‰éºµ">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeExpenseModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveExpense()">å„²å­˜</button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    // æ–°å¢è¨˜å¸³æ¨£å¼
    const style = document.createElement('style');
    style.textContent = `
        .expense-summary {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        .summary-card {
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .summary-card .amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        .summary-card .label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .summary-card .twd {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        .add-expense-btn {
            width: 100%;
            margin-bottom: 16px;
        }
        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .expense-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 14px;
            border: 1px solid var(--border);
        }
        .expense-icon {
            font-size: 1.5rem;
        }
        .expense-info {
            flex: 1;
        }
        .expense-info .name {
            font-weight: 500;
        }
        .expense-info .meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .expense-amount {
            text-align: right;
        }
        .expense-amount .jpy {
            font-weight: 700;
            color: var(--accent);
        }
        .expense-amount .twd {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .expense-delete {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 8px;
            font-size: 1.2rem;
        }
        .expense-delete:hover {
            color: var(--primary);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(4px);
            z-index: 200;
            align-items: flex-end;
            justify-content: center;
        }
        .modal.open {
            display: flex;
        }
        .modal-content {
            background: var(--bg-card);
            border-radius: var(--radius) var(--radius) 0 0;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }
        .modal-header h3 {
            font-size: 1.1rem;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
        }
        .modal-body {
            padding: 20px;
        }
        .modal-footer {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid var(--border);
        }
        .modal-footer .btn {
            flex: 1;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
        }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        .category-option {
            cursor: pointer;
        }
        .category-option input {
            display: none;
        }
        .category-option span {
            display: block;
            padding: 12px 8px;
            text-align: center;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .category-option input:checked + span {
            background: var(--primary);
            border-color: var(--primary);
        }
        .no-expenses {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }
    `;
    document.head.appendChild(style);
}

function renderExpenses() {
    const summary = document.getElementById('expenseSummary');
    const list = document.getElementById('expenseList');
    
    const total = expenses.reduce((sum, e) => sum + e.amount, 0);
    const byCategory = {};
    expenseCategories.forEach(c => byCategory[c.id] = 0);
    expenses.forEach(e => byCategory[e.category] = (byCategory[e.category] || 0) + e.amount);
    
    summary.innerHTML = `
        <div class="summary-card">
            <div class="amount">Â¥${total.toLocaleString()}</div>
            <div class="label">ç¸½æ”¯å‡º</div>
            <div class="twd">â‰ˆ NT$${Math.round(total * JPY_TO_TWD).toLocaleString()}</div>
        </div>
        <div class="summary-card">
            <div class="amount">${expenses.length}</div>
            <div class="label">ç­†è¨˜éŒ„</div>
        </div>
    `;
    
    if (expenses.length === 0) {
        list.innerHTML = '<div class="no-expenses">å°šç„¡æ”¯å‡ºè¨˜éŒ„<br>é»æ“Šä¸Šæ–¹æŒ‰éˆ•æ–°å¢</div>';
        return;
    }
    
    list.innerHTML = expenses.sort((a, b) => b.id - a.id).map(e => {
        const cat = expenseCategories.find(c => c.id === e.category) || { icon: 'ğŸ“¦', name: 'å…¶ä»–' };
        return `
            <div class="expense-item">
                <span class="expense-icon">${cat.icon}</span>
                <div class="expense-info">
                    <div class="name">${e.note || cat.name}</div>
                    <div class="meta">Day ${e.day} Â· ${cat.name}</div>
                </div>
                <div class="expense-amount">
                    <div class="jpy">Â¥${e.amount.toLocaleString()}</div>
                    <div class="twd">â‰ˆ NT$${Math.round(e.amount * JPY_TO_TWD)}</div>
                </div>
                <button class="expense-delete" onclick="deleteExpense(${e.id})">Ã—</button>
            </div>
        `;
    }).join('');
}

function openExpenseModal() {
    document.getElementById('expenseModal').classList.add('open');
    document.getElementById('expenseDay').value = currentDay + 1;
}

function closeExpenseModal() {
    document.getElementById('expenseModal').classList.remove('open');
    document.getElementById('expenseAmount').value = '';
    document.getElementById('expenseNote').value = '';
    document.querySelectorAll('input[name="category"]').forEach(r => r.checked = false);
}

function saveExpense() {
    const day = parseInt(document.getElementById('expenseDay').value);
    const category = document.querySelector('input[name="category"]:checked')?.value;
    const amount = parseInt(document.getElementById('expenseAmount').value);
    const note = document.getElementById('expenseNote').value.trim();
    
    if (!category || !amount || amount <= 0) {
        alert('è«‹é¸æ“‡é¡åˆ¥ä¸¦è¼¸å…¥é‡‘é¡');
        return;
    }
    
    expenses.push({
        id: Date.now(),
        day,
        category,
        amount,
        note
    });
    
    localStorage.setItem('fukuoka-expenses', JSON.stringify(expenses));
    closeExpenseModal();
    renderExpenses();
}

function deleteExpense(id) {
    if (confirm('ç¢ºå®šåˆªé™¤æ­¤ç­†æ”¯å‡ºï¼Ÿ')) {
        expenses = expenses.filter(e => e.id !== id);
        localStorage.setItem('fukuoka-expenses', JSON.stringify(expenses));
        renderExpenses();
    }
}

// ===== ç·Šæ€¥è³‡è¨Š =====
function addEmergencySection() {
    const mainContent = document.querySelector('.main-content');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'emergency';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ†˜</span>ç·Šæ€¥è³‡è¨Š</h2>
        <div class="emergency-grid">
            <a href="tel:110" class="emergency-card">
                <span class="em-icon">ğŸš”</span>
                <span class="em-name">è­¦å¯Ÿ</span>
                <span class="em-num">110</span>
            </a>
            <a href="tel:119" class="emergency-card">
                <span class="em-icon">ğŸš‘</span>
                <span class="em-name">æ¶ˆé˜²/æ•‘è­·</span>
                <span class="em-num">119</span>
            </a>
            <a href="tel:+81-92-771-0461" class="emergency-card">
                <span class="em-icon">ğŸ¥</span>
                <span class="em-name">ç¦å²¡å¸‚æ€¥æ•‘</span>
                <span class="em-num">092-771-0461</span>
            </a>
            <a href="tel:+81-92-751-2121" class="emergency-card">
                <span class="em-icon">ğŸ‡¹ğŸ‡¼</span>
                <span class="em-name">å°åŒ—é§ç¦å²¡è¾¦äº‹è™•</span>
                <span class="em-num">092-751-2121</span>
            </a>
        </div>
        <div class="emergency-note">
            <p>ğŸ“ å°åŒ—é§ç¦å²¡ç¶“æ¿Ÿæ–‡åŒ–è¾¦äº‹è™•</p>
            <p>åœ°å€ï¼šç¦å²¡å¸‚ä¸­å¤®å€æ¡œå‚3-12-42</p>
            <p>ç·Šæ€¥è¯çµ¡ï¼š+81-92-734-2810 (24å°æ™‚)</p>
        </div>
        
        <h3 class="sub-section-title">ğŸ’Š è—¥å“è³¼è²·ï¼ˆçŒ›å¥æ¨‚ãƒŸãƒã‚­ã‚·ã‚¸ãƒ«ï¼‰</h3>
        <div class="pharmacy-list">
            <div class="pharmacy-card">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸ’Š</span>
                    <div class="pharm-info">
                        <h4>ãƒªã‚¢ãƒƒãƒ—X5 / ãƒªã‚°ãƒ­EX5ï¼ˆ5%å¤–ç”¨ï¼‰</h4>
                        <p>ğŸ’° ç´„ Â¥5,940~5,980ï¼ˆ60ml/30æ—¥ä»½ï¼‰</p>
                        <p>ç¬¬ä¸€é¡é†«è—¥å“ãƒ»ç„¡éœ€è™•æ–¹</p>
                        <p class="pharm-note">âš ï¸ éœ€å‘è—¥åŠ‘å¸«èªªæ˜è³¼è²·</p>
                    </div>
                </div>
            </div>
            <a href="https://www.google.com/maps/search/?api=1&query=ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ©å¤©ç¥2å·é¤¨" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸª</span>
                    <div class="pharm-info">
                        <h4>Bic Camera å¤©ç¥2å·é¤¨</h4>
                        <p>è—¥å¦å€æœ‰è²©å”®ãƒ»æ­¥è¡Œ2-3åˆ†é˜</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
            <a href="https://www.google.com/maps/search/?api=1&query=ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†å¤©ç¥åº—" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸª</span>
                    <div class="pharm-info">
                        <h4>å”å‰è¨¶å¾· å¤©ç¥åº—</h4>
                        <p>è—¥å¦å€æœ‰è²©å”®ãƒ»ç‡Ÿæ¥­è‡³æ·±å¤œ</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
            <a href="https://www.google.com/maps/search/?api=1&query=ãƒãƒ„ãƒ¢ãƒˆã‚­ãƒ¨ã‚·å¤©ç¥" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸ’Š</span>
                    <div class="pharm-info">
                        <h4>æ¾æœ¬æ¸…è—¥å¦ å¤©ç¥</h4>
                        <p>é€£é–è—¥å¦åº—ãƒ»ç¨®é¡é½Šå…¨</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
        </div>
        
        <h3 class="sub-section-title">ğŸ’‰ çŒ›å¥æ¨‚ Mounjaroï¼ˆãƒãƒ³ã‚¸ãƒ£ãƒ­ï¼‰è™•æ–¹è¨ºæ‰€</h3>
        <p class="clinic-note">âš ï¸ éœ€é†«å¸«è™•æ–¹ãƒ»æ¯é€±1æ¬¡çš®ä¸‹æ³¨å°„ãƒ»æ¸›è‚¥ç”¨</p>
        <div class="pharmacy-list">
            <a href="https://www.google.com/maps/search/?api=1&query=ã‚¯ãƒ©ãƒ©ç¾å®¹çš®è†šç§‘+ç¦å²¡å¤©ç¥é™¢" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸ¥</span>
                    <div class="pharm-info">
                        <h4>ã‚¯ãƒ©ãƒ©ç¾å®¹çš®è†šç§‘ å¤©ç¥é™¢</h4>
                        <p>ğŸ’° 2.5mg Â¥4,400èµ·ãƒ»è¨ºå¯Ÿæ–™å…è²»</p>
                        <p class="clinic-tag">ğŸ“ å¤©ç¥ç«™æ—ãƒ»æœ‰æ³¨å°„æ•™å­¸</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
            <a href="https://www.google.com/maps/search/?api=1&query=æ±éƒ·ç¾å®¹å½¢æˆå¤–ç§‘+ç¦å²¡" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸ¥</span>
                    <div class="pharm-info">
                        <h4>æ±éƒ·ç¾å®¹å½¢æˆå¤–ç§‘</h4>
                        <p>ğŸ’° åˆå› Â¥4,400ãƒ»2å›ç›® Â¥5,500</p>
                        <p class="clinic-tag">ğŸ“ åšå¤šç«™æ­¥è¡Œ3åˆ†ãƒ»å¯éƒµå¯„</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
            <a href="https://www.google.com/maps/search/?api=1&query=ã‚¯ãƒªãƒ‹ãƒ¼ã‚¯ç¦å²¡å¤©ç¥" 
               target="_blank" class="pharmacy-card clickable">
                <div class="pharm-main">
                    <span class="pharm-icon">ğŸ¥</span>
                    <div class="pharm-info">
                        <h4>ã‚¯ãƒªãƒ‹ãƒ¼ã‚¯ç¦å²¡å¤©ç¥</h4>
                        <p>ğŸ’° å¤šæ¬¾GLP-1å¯é¸ãƒ»å¯æ•£è²·</p>
                        <p class="clinic-tag">ğŸ“ å¤©ç¥ç«™æ­¥è¡Œ5åˆ†</p>
                    </div>
                    <span class="pharm-arrow">â†’</span>
                </div>
            </a>
        </div>
        <div class="mounjaro-note">
            <p>ğŸ“‹ <strong>å¸¶å›å°ç£é ˆçŸ¥</strong></p>
            <p>â€¢ é‡åŠ‘éœ€é†«å¸«è™•æ–¹ç®‹ï¼ˆå¿…å‚™ï¼‰</p>
            <p>â€¢ æœ€å¤šæ”œå¸¶ 6 å€‹æœˆç”¨é‡</p>
            <p>â€¢ éœ€ 2-8Â°C å†·è—ä¿å­˜ï¼ˆå¸¶ä¿å†·è¢‹ï¼‰</p>
        </div>
    `;
    
    mainContent.appendChild(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .emergency-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        .emergency-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s;
        }
        .emergency-card:hover {
            background: var(--bg-elevated);
            border-color: var(--primary);
        }
        .em-icon { font-size: 1.5rem; }
        .em-name { font-size: 0.8rem; color: var(--text-secondary); }
        .em-num { font-size: 0.9rem; font-weight: 600; color: var(--secondary); }
        .emergency-note {
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 16px;
            border: 1px solid var(--border);
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .emergency-note p { margin-bottom: 4px; }
        .sub-section-title {
            font-size: 1rem;
            font-weight: 900;
            margin: 20px 0 12px;
            color: var(--text-primary);
        }
        .pharmacy-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .pharmacy-card {
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 3px 3px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
        }
        .pharmacy-card.clickable:hover {
            background: var(--bg-elevated);
            transform: translateX(4px);
        }
        .pharm-main {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .pharm-icon { font-size: 1.8rem; }
        .pharm-info { flex: 1; }
        .pharm-info h4 { font-size: 0.95rem; font-weight: 900; margin-bottom: 2px; }
        .pharm-info p { font-size: 0.8rem; color: var(--text-secondary); }
        .pharm-note { color: var(--orange) !important; font-weight: 700; }
        .pharm-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
        .clinic-note {
            font-size: 0.8rem;
            color: var(--orange);
            font-weight: 700;
            margin-bottom: 12px;
        }
        .clinic-tag {
            color: var(--secondary) !important;
            font-weight: 700;
        }
        .mounjaro-note {
            background: linear-gradient(135deg, var(--pink) 0%, var(--secondary) 100%);
            border-radius: var(--radius);
            padding: 14px 16px;
            margin-top: 12px;
            color: white;
            font-size: 0.8rem;
            border: var(--border-width) solid var(--border);
        }
        .mounjaro-note strong { font-weight: 900; }
        .mounjaro-note p { margin-bottom: 4px; }
    `;
    document.head.appendChild(style);
}

// ===== å€åŸŸåœ°åœ–ç¸½è¦½ =====
function addHotelAreaMapSection() {
    const mainContent = document.querySelector('.main-content');
    if (!mainContent) return;
    
    // å€åŸŸè³‡æ–™ï¼ˆæ•´åˆå®Œæ•´è¡Œç¨‹åœ°é»ï¼‰
    const areaData = [
        {
            id: 'hotel',
            icon: 'ğŸ¨',
            name: 'é£¯åº—å‘¨é‚Š',
            subtitle: 'The OneFive Villaãƒ»ä¸­æ´²',
            mapUrl: 'https://www.google.com/maps/place/The+OneFive+Villa+Fukuoka/@33.5896,130.4068,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.6!2d130.4068!3d33.5896!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3541918e8f8d6c0d%3A0x1a2b3c4d5e6f7890!2sThe%20OneFive%20Villa%20Fukuoka!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['ç‡’è‚‰ã™ã©ã† 3åˆ†', 'ä¸­æ´²å±‹å° 5åˆ†', 'MaxValu 8åˆ†', 'ä¸­æ´²å·ç«¯ç«™ 7åˆ†', 'æ«›ç”°ç¥ç¤¾ 5åˆ†', 'æŸ³æ©‹å¸‚å ´ 10åˆ†'],
            color: '#FF6B6B'
        },
        {
            id: 'canal',
            icon: 'ğŸŒŠ',
            name: 'é‹æ²³åŸ',
            subtitle: 'Day 1 åšå¤šé‹æ²³åŸ',
            mapUrl: 'https://www.google.com/maps/place/ã‚­ãƒ£ãƒŠãƒ«ã‚·ãƒ†ã‚£åšå¤š/@33.5897,130.4107,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.6!2d130.4107!3d33.5897!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x35419181b0b9f0ed%3A0x1234567890abcdef!2sCanal%20City%20Hakata!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['å™´æ³‰è¡¨æ¼”', 'å·ç«¯å•†åº—è¡—', 'æ«›ç”°ç¥ç¤¾', 'æ‹‰éºµç«¶æŠ€å ´', 'ä¸€è˜­ç¸½æœ¬åº—'],
            color: '#339AF0'
        },
        {
            id: 'hakata',
            icon: 'ğŸš„',
            name: 'åšå¤šç«™',
            subtitle: 'JR/æ–°å¹¹ç·šæ¨ç´',
            mapUrl: 'https://www.google.com/maps/place/åšå¤šé§…/@33.5897,130.4207,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.6!2d130.4207!3d33.5897!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x354191c0d79c6c5b%3A0x4c0e8051bb963a5b!2sHakata%20Station!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['åšå¤šé˜ªæ€¥', 'AMU Plaza', 'KITTEåšå¤š', 'åšå¤šä¸€é›™', 'åšå¤šé”æ‘©'],
            color: '#4ECDC4'
        },
        {
            id: 'tenjin',
            icon: 'ğŸ›ï¸',
            name: 'å¤©ç¥å€åŸŸ',
            subtitle: 'Day 7 è³¼ç‰©ç¾é£Ÿ',
            mapUrl: 'https://www.google.com/maps/place/å¤©ç¥/@33.5917,130.3992,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.4!2d130.3992!3d33.5917!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x354191909eb1eccd%3A0x65d77f09c9f8aaf0!2sTenjin!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['å¤©ç¥åœ°ä¸‹è¡—', 'å¤§ä¸¸ç™¾è²¨', 'PARCO', 'Bic Camera', 'ä¸€è˜­å¤©ç¥åº—', 'è­¦å›ºç¥ç¤¾'],
            color: '#FFE66D'
        },
        {
            id: 'gundam',
            icon: 'ğŸ¤–',
            name: 'LaLaport',
            subtitle: 'Day 3 é‹¼å½ˆæœè–',
            mapUrl: 'https://www.google.com/maps/place/ã‚‰ã‚‰ã½ãƒ¼ã¨ç¦å²¡/@33.5771,130.4417,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3324.2!2d130.4417!3d33.5771!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3541915e8f8d6c0d%3A0xabcdef1234567890!2sLaLaport%20Fukuoka!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['RX-93 Î½é‹¼å½ˆ', 'GUNDAM SIDE-F', 'teamLab Forest', 'VS PARK', 'namco'],
            color: '#26DE81'
        },
        {
            id: 'dazaifu',
            icon: 'â›©ï¸',
            name: 'å¤ªå®°åºœ',
            subtitle: 'Day 2 å­¸å•ä¹‹ç¥',
            mapUrl: 'https://www.google.com/maps/place/å¤ªå®°åºœå¤©æº€å®®/@33.5212,130.5348,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3325.1!2d130.5348!3d33.5212!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x354187946e3c1d5b%3A0x18c8c9c1c1c1c1c1!2sDazaifu%20Tenmangu%20Shrine!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['å¤©æ»¿å®®', 'è¡¨åƒé“', 'æ¢…æé¤…', 'æ˜Ÿå·´å…‹ç‰¹åˆ¥åº—', 'æŸ³å·éŠèˆ¹'],
            color: '#A66CFF'
        },
        {
            id: 'momochi',
            icon: 'ğŸ—¼',
            name: 'ç™¾é“æµ·æ¿±',
            subtitle: 'Day 6 ç¦å²¡å¡”',
            mapUrl: 'https://www.google.com/maps/place/ç¦å²¡ã‚¿ãƒ¯ãƒ¼/@33.5934,130.3511,16z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3323.2!2d130.3511!3d33.5934!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x354193c7e8c1d5c9%3A0x5c5c5c5c5c5c5c5c!2sFukuoka%20Tower!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['ç¦å²¡å¡”å¤œæ™¯', 'Marizon', 'å¸‚åšç‰©é¤¨', 'å¤§æ¿ å…¬åœ’', 'FUK COFFEE', 'ç¦å²¡åŸè·¡'],
            color: '#FF9F43'
        },
        {
            id: 'uminaka',
            icon: 'ğŸ¬',
            name: 'æµ·ä¹‹ä¸­é“',
            subtitle: 'Day 5 æ°´æ—é¤¨',
            mapUrl: 'https://www.google.com/maps/place/ãƒãƒªãƒ³ãƒ¯ãƒ¼ãƒ«ãƒ‰æµ·ã®ä¸­é“/@33.6534,130.3648,14z',
            embedUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6645.8!2d130.3648!3d33.6534!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x354193c7e8c1d5c9%3A0x7c7c7c7c7c7c7c7c!2sMarine%20World%20Uminonakamichi!5e0!3m2!1szh-TW!2sjp!4v1',
            highlights: ['æµ·æ´‹ä¸–ç•Œæ°´æ—é¤¨', 'æµ·æ¿±å…¬åœ’', 'ç§Ÿè‡ªè¡Œè»Š', 'æµ·è±šè¡¨æ¼”', 'è¦ªå­æ¨è–¦'],
            color: '#20C997'
        }
    ];
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'hotel-area-map';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ—ºï¸</span>å€åŸŸåœ°åœ–</h2>
        <p class="area-map-subtitle">å®Œæ•´è¡Œç¨‹åœ°åœ–ï¼ˆå¯ç¸®æ”¾ã€å¹³ç§»ï¼‰</p>
        
        <div class="my-map-embed">
            <iframe 
                src="https://www.google.com/maps/d/embed?mid=1yTfGKQHRdgu1I9Lxgy9BTlvFEtvwbhw&ehbc=2E312F"
                width="100%" 
                height="350" 
                style="border:0; border-radius: 12px;" 
                allowfullscreen="" 
                loading="lazy">
            </iframe>
        </div>
        <a href="https://www.google.com/maps/d/u/1/edit?mid=1yTfGKQHRdgu1I9Lxgy9BTlvFEtvwbhw&usp=sharing" target="_blank" class="my-map-btn">
            ğŸ—ºï¸ åœ¨æ–°è¦–çª—é–‹å•Ÿå®Œæ•´åœ°åœ–
        </a>
        
        <p class="area-map-subtitle" style="margin-top: 20px;">å¿«é€ŸæŸ¥çœ‹å„å€åŸŸ</p>
        
        <div class="area-selector">
            ${areaData.map((area, index) => `
                <button class="area-btn ${index === 0 ? 'active' : ''}" data-area="${area.id}" style="--area-color: ${area.color}">
                    <span class="area-icon">${area.icon}</span>
                    <span class="area-name">${area.name}</span>
                </button>
            `).join('')}
        </div>
        
        <div class="area-content">
            ${areaData.map((area, index) => `
                <div class="area-panel ${index === 0 ? 'active' : ''}" data-panel="${area.id}">
                    <div class="area-header" style="background: ${area.color}">
                        <span class="area-header-icon">${area.icon}</span>
                        <div>
                            <h3>${area.name}</h3>
                            <p>${area.subtitle}</p>
                        </div>
                    </div>
                    <div class="area-map-embed">
                        <iframe 
                            src="${area.embedUrl}"
                            width="100%" 
                            height="200" 
                            style="border:0; border-radius: 12px;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                    <div class="area-highlights">
                        <h4>ğŸ“ å‘¨é‚Šäº®é»</h4>
                        <div class="highlight-tags">
                            ${area.highlights.map(h => `<span class="highlight-tag">${h}</span>`).join('')}
                        </div>
                    </div>
                    <a href="${area.mapUrl}" target="_blank" class="area-open-btn" style="background: ${area.color}">
                        ğŸ—ºï¸ åœ¨ Google Maps é–‹å•Ÿ
                    </a>
                </div>
            `).join('')}
        </div>
    `;
    
    mainContent.appendChild(section);
    
    // å€åŸŸåˆ‡æ›é‚è¼¯
    const areaBtns = section.querySelectorAll('.area-btn');
    const areaPanels = section.querySelectorAll('.area-panel');
    
    areaBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const areaId = btn.dataset.area;
            
            areaBtns.forEach(b => b.classList.remove('active'));
            areaPanels.forEach(p => p.classList.remove('active'));
            
            btn.classList.add('active');
            section.querySelector(`[data-panel="${areaId}"]`).classList.add('active');
        });
    });
    
    const style = document.createElement('style');
    style.textContent = `
        .area-map-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 16px;
        }
        .area-selector {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 12px;
            margin-bottom: 16px;
            scrollbar-width: none;
        }
        .area-selector::-webkit-scrollbar { display: none; }
        .my-map-btn {
            display: block;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
            font-size: 0.9rem;
            padding: 14px 20px;
            border-radius: var(--radius);
            text-decoration: none;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            transition: all 0.2s;
        }
        .my-map-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }
        .my-map-embed {
            margin-bottom: 12px;
            border-radius: var(--radius);
            overflow: hidden;
            border: var(--border-width) solid var(--border);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .my-map-embed iframe {
            display: block;
        }
        .area-btn {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
            background: var(--bg-card);
            border: var(--border-width) solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 3px 3px 0px var(--border);
            min-width: 70px;
        }
        .area-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0px var(--border);
        }
        .area-btn.active {
            background: var(--area-color);
            color: white;
            transform: rotate(-2deg);
        }
        .area-icon { font-size: 1.5rem; }
        .area-name { font-size: 0.7rem; font-weight: 700; white-space: nowrap; }
        .area-content { position: relative; }
        .area-panel {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .area-panel.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .area-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border-radius: var(--radius) var(--radius) 0 0;
            color: white;
        }
        .area-header-icon { font-size: 2rem; }
        .area-header h3 { font-size: 1.1rem; font-weight: 900; margin: 0; }
        .area-header p { font-size: 0.8rem; opacity: 0.9; margin: 0; }
        .area-map-embed {
            background: var(--bg-card);
            padding: 12px;
            border-left: var(--border-width) solid var(--border);
            border-right: var(--border-width) solid var(--border);
        }
        .area-highlights {
            background: var(--bg-card);
            padding: 12px 16px;
            border-left: var(--border-width) solid var(--border);
            border-right: var(--border-width) solid var(--border);
        }
        .area-highlights h4 {
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .highlight-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .highlight-tag {
            background: var(--bg-elevated);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid var(--border);
        }
        .area-open-btn {
            display: block;
            text-align: center;
            color: white;
            font-weight: 700;
            padding: 12px;
            border-radius: 0 0 var(--radius) var(--radius);
            text-decoration: none;
            border: var(--border-width) solid var(--border);
            border-top: none;
        }
    `;
    document.head.appendChild(style);
}

// ===== è¦–è¦ºåŒ–å‘¨é‚Šåœ°åœ–ï¼ˆå¼·åŒ–ç‰ˆï¼‰=====
function addVisualMapSection() {
    const hotelMapSection = document.getElementById('hotel-area-map');
    if (!hotelMapSection) return;
    
    // å®Œæ•´ POI è³‡æ–™ï¼ˆæ•´åˆæ‰€æœ‰ web app è³‡æ–™ï¼‰
    const mapPOIs = [
        // é£¯åº—ä¸­å¿ƒ
        { name: "ğŸ¨", label: "é£¯åº—", x: 50, y: 50, type: "hotel" },
        
        // === ç¾é£Ÿé¤å»³ ===
        { name: "ğŸ¥©", label: "ç‡’è‚‰ã™ã©ã†", x: 45, y: 55, type: "food" },
        { name: "ğŸ²", label: "æ¨‚å¤©åœ°", x: 55, y: 62, type: "food" },
        { name: "ğŸ™", label: "æ˜å¤ªé‡", x: 42, y: 45, type: "food" },
        { name: "ğŸ®", label: "ä¸­æ´²å±‹å°", x: 60, y: 70, type: "food" },
        { name: "ğŸ²", label: "è¯å‘³é³¥", x: 25, y: 40, type: "food" },
        { name: "ğŸ£", label: "ã†ãŠç”°", x: 52, y: 58, type: "food" },
        // æ‹‰éºµåº—
        { name: "ğŸœ", label: "ä¸€è˜­å¤©ç¥", x: 22, y: 32, type: "food" },
        { name: "ğŸœ", label: "ä¸€è˜­è¥¿é€š", x: 20, y: 38, type: "food" },
        { name: "ğŸœ", label: "åšå¤šä¸€é›™", x: 78, y: 35, type: "food" },
        { name: "ğŸœ", label: "åšå¤šé”æ‘©", x: 80, y: 42, type: "food" },
        { name: "ğŸ¥©", label: "è‚‰ã„ã¡", x: 83, y: 48, type: "food" },
        { name: "ğŸœ", label: "ä¸€è˜­ç¸½æœ¬åº—", x: 68, y: 45, type: "food" },
        { name: "ğŸœ", label: "å¤§ç ²æ‹‰éºµ", x: 75, y: 52, type: "food" },
        { name: "ğŸ”", label: "æŒ½è‚‰èˆ‡ç±³", x: 72, y: 48, type: "food" },
        
        // === å’–å•¡ç”œé» ===
        { name: "â˜•", label: "FUKç¥‡åœ’", x: 68, y: 30, type: "cafe" },
        { name: "â˜•", label: "Blue Bottle", x: 20, y: 30, type: "cafe" },
        { name: "ğŸ", label: "RINGO", x: 18, y: 25, type: "cafe" },
        { name: "ğŸ©", label: "Mister Donut", x: 28, y: 48, type: "cafe" },
        { name: "ğŸ§€", label: "BAKE", x: 16, y: 22, type: "cafe" },
        { name: "ğŸ¡", label: "éˆ´æ‡¸", x: 75, y: 28, type: "cafe" },
        { name: "ğŸ“", label: "ä¼Šéƒ½ãã‚“ã", x: 78, y: 25, type: "cafe" },
        { name: "ğŸ", label: "Dacomecca", x: 82, y: 45, type: "cafe" },
        
        // === è³¼ç‰©å•†åº— ===
        { name: "ğŸ›’", label: "MaxValu 24H", x: 72, y: 50, type: "shop" },
        { name: "ğŸª", label: "Foodway 24H", x: 56, y: 75, type: "shop" },
        { name: "ğŸ“·", label: "Bic Camera", x: 28, y: 25, type: "shop" },
        { name: "ğŸ›ï¸", label: "å¤©ç¥åœ°ä¸‹è¡—", x: 15, y: 20, type: "shop" },
        { name: "ğŸ¯", label: "å”å‰è¨¶å¾·", x: 18, y: 42, type: "shop" },
        { name: "ğŸª™", label: "3COINS", x: 25, y: 22, type: "shop" },
        { name: "ğŸ¬", label: "minaå¤©ç¥", x: 24, y: 24, type: "shop" },
        { name: "ğŸ‘“", label: "JINS mina", x: 25, y: 25, type: "shop" },
        { name: "ğŸ§¥", label: "Workman", x: 8, y: 48, type: "shop" },
        
        // === è—¥å¦åº— ===
        { name: "ğŸ’Š", label: "æ¾æœ¬æ¸…", x: 22, y: 28, type: "drugstore" },
        { name: "ğŸ’Š", label: "å¤§åœ‹è—¥å¦", x: 26, y: 35, type: "drugstore" },
        { name: "ğŸ’Š", label: "Sundrug", x: 15, y: 35, type: "drugstore" },
        
        { name: "ğŸ”´", label: "DAISO", x: 30, y: 20, type: "yen100" },
        { name: "ğŸŸ¢", label: "Seriaå¤©ç¥", x: 24, y: 18, type: "yen100" },
        { name: "ğŸŸ¢", label: "Seriaåšå¤š", x: 75, y: 55, type: "yen100" },
        { name: "ğŸŸ¡", label: "Can Do", x: 18, y: 15, type: "yen100" },
        
        { name: "ğŸ®", label: "GiGOå¤©ç¥", x: 12, y: 28, type: "arcade" },
        { name: "ğŸ®", label: "GiGO mina", x: 24, y: 27, type: "arcade" },
        { name: "ğŸ®", label: "namcoåšå¤š", x: 82, y: 38, type: "arcade" },
        { name: "ğŸ®", label: "Taito", x: 70, y: 58, type: "arcade" },
        
        { name: "â›©ï¸", label: "æ«›ç”°ç¥ç¤¾", x: 65, y: 42, type: "attraction" },
        { name: "â›©ï¸", label: "è­¦å›ºç¥ç¤¾", x: 20, y: 28, type: "attraction" },
        { name: "ğŸ®", label: "å·ç«¯å•†åº—è¡—", x: 60, y: 35, type: "attraction" },
        { name: "ğŸŒŠ", label: "é‹æ²³åŸ", x: 70, y: 60, type: "attraction" },
        { name: "ğŸŸ", label: "æŸ³æ©‹å¸‚å ´", x: 35, y: 68, type: "attraction" },
        { name: "ğŸ¢", label: "ONE Fukuoka", x: 78, y: 32, type: "attraction" },
        { name: "ğŸ„", label: "Pixel Tree", x: 80, y: 30, type: "attraction" },
        { name: "ğŸ§¸", label: "éº»åŒ…è¶…äºº", x: 73, y: 62, type: "attraction" },
        { name: "ğŸŒ³", label: "å¤§æ¿ å…¬åœ’", x: 5, y: 50, type: "attraction" },
        { name: "âš¾", label: "ç¦å²¡å·¨è›‹", x: 3, y: 55, type: "attraction" },
        { name: "ğŸ‘·", label: "KidZania", x: 92, y: 65, type: "attraction" },
        { name: "ğŸš‚", label: "é‰„é“è¨˜å¿µé¤¨", x: 95, y: 5, type: "attraction" },
        
        // === å¤œç”Ÿæ´» ===
        { name: "ğŸº", label: "æ°´ç‚Šé•·é‡", x: 57, y: 65, type: "nightlife" },
        { name: "ğŸ»", label: "Bar Higuchi", x: 48, y: 68, type: "nightlife" },
        
        // === äº¤é€š ===
        { name: "ğŸš‡", label: "ä¸­æ´²å·ç«¯", x: 48, y: 28, type: "transport" },
        { name: "ğŸš‡", label: "æ«›ç”°ç¥ç¤¾å‰", x: 68, y: 40, type: "transport" },
        { name: "ğŸšƒ", label: "è¥¿é‰„å¤©ç¥", x: 12, y: 25, type: "transport" },
        { name: "ğŸš„", label: "åšå¤šç«™", x: 85, y: 32, type: "transport" }
    ];
    
    const visualMap = document.createElement('div');
    visualMap.className = 'visual-map-container';
    visualMap.innerHTML = `
        <h4 class="visual-map-title">ğŸ“ å‘¨é‚Šæ™¯é»åˆ†ä½ˆ <span class="poi-count">(${mapPOIs.length}å€‹åœ°é»)</span></h4>
        <div class="visual-map">
            <div class="map-controls">
                <div class="map-legend">
                    <span class="legend-item" data-filter="food"><span class="dot food"></span>ç¾é£Ÿ</span>
                    <span class="legend-item" data-filter="cafe"><span class="dot cafe"></span>ç”œé»</span>
                    <span class="legend-item" data-filter="shop"><span class="dot shop"></span>è³¼ç‰©</span>
                    <span class="legend-item" data-filter="drugstore"><span class="dot drugstore"></span>è—¥å¦</span>
                    <span class="legend-item" data-filter="yen100"><span class="dot yen100"></span>ç™¾å…ƒ</span>
                    <span class="legend-item" data-filter="arcade"><span class="dot arcade"></span>éŠæˆ²</span>
                    <span class="legend-item" data-filter="attraction"><span class="dot attraction"></span>æ™¯é»</span>
                    <span class="legend-item" data-filter="nightlife"><span class="dot nightlife"></span>å¤œç”Ÿæ´»</span>
                    <span class="legend-item" data-filter="transport"><span class="dot transport"></span>äº¤é€š</span>
                </div>
                <div class="zoom-controls">
                    <button class="zoom-btn" data-zoom="in">â•</button>
                    <button class="zoom-btn" data-zoom="out">â–</button>
                    <button class="zoom-btn" data-zoom="reset">â†º</button>
                </div>
            </div>
            <div class="map-viewport">
                <div class="map-area" id="zoomableMap">
                    ${mapPOIs.map(poi => `
                        <div class="map-poi ${poi.type}" style="left: ${poi.x}%; top: ${poi.y}%;" title="${poi.label}">
                            <span class="poi-emoji">${poi.name}</span>
                            <span class="poi-label">${poi.label}</span>
                        </div>
                    `).join('')}
                    <div class="hotel-center">
                        <div class="pulse-ring"></div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    hotelMapSection.appendChild(visualMap);
    
    // ç¸®æ”¾èˆ‡æ‹–æ›³åŠŸèƒ½
    let currentZoom = 1;
    let panX = 0, panY = 0;
    let isDragging = false;
    let startX, startY;
    
    const mapArea = visualMap.querySelector('#zoomableMap');
    const mapViewport = visualMap.querySelector('.map-viewport');
    const zoomBtns = visualMap.querySelectorAll('.zoom-btn');
    
    const updateTransform = () => {
        mapArea.style.transform = `translate(${panX}px, ${panY}px) scale(${currentZoom})`;
    };
    
    zoomBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const action = btn.dataset.zoom;
            if (action === 'in' && currentZoom < 2.5) currentZoom += 0.25;
            if (action === 'out' && currentZoom > 0.5) currentZoom -= 0.25;
            if (action === 'reset') { currentZoom = 1; panX = 0; panY = 0; }
            updateTransform();
        });
    });
    
    // æ»‘é¼ æ‹–æ›³
    mapViewport.addEventListener('mousedown', (e) => {
        if (currentZoom <= 1) return;
        isDragging = true;
        startX = e.clientX - panX;
        startY = e.clientY - panY;
        mapViewport.style.cursor = 'grabbing';
    });
    
    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        panX = e.clientX - startX;
        panY = e.clientY - startY;
        updateTransform();
    });
    
    document.addEventListener('mouseup', () => {
        isDragging = false;
        mapViewport.style.cursor = currentZoom > 1 ? 'grab' : 'default';
    });
    
    // è§¸æ§æ‹–æ›³
    mapViewport.addEventListener('touchstart', (e) => {
        if (currentZoom <= 1 || e.touches.length !== 1) return;
        isDragging = true;
        startX = e.touches[0].clientX - panX;
        startY = e.touches[0].clientY - panY;
    }, { passive: true });
    
    mapViewport.addEventListener('touchmove', (e) => {
        if (!isDragging || e.touches.length !== 1) return;
        panX = e.touches[0].clientX - startX;
        panY = e.touches[0].clientY - startY;
        updateTransform();
    }, { passive: true });
    
    mapViewport.addEventListener('touchend', () => {
        isDragging = false;
    });
    
    // åˆ†é¡éæ¿¾åŠŸèƒ½
    const legendItems = visualMap.querySelectorAll('.legend-item[data-filter]');
    legendItems.forEach(item => {
        item.addEventListener('click', () => {
            const filterType = item.dataset.filter;
            const pois = visualMap.querySelectorAll('.map-poi');
            const isActive = item.classList.contains('active');
            
            if (isActive) {
                item.classList.remove('active');
                pois.forEach(poi => poi.style.opacity = '1');
            } else {
                legendItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                pois.forEach(poi => {
                    poi.style.opacity = poi.classList.contains(filterType) || poi.classList.contains('hotel') ? '1' : '0.15';
                });
            }
        });
    });
    
    const style = document.createElement('style');
    style.textContent = `
        .visual-map-container { margin-top: 20px; }
        .visual-map-title { font-size: 0.9rem; font-weight: 700; margin-bottom: 12px; }
        .poi-count { font-size: 0.7rem; color: var(--text-muted); font-weight: 500; }
        .visual-map { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: var(--radius); padding: 12px; border: 1px solid var(--border); }
        .map-controls { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; gap: 8px; flex-wrap: wrap; }
        .map-legend { display: flex; gap: 6px; flex-wrap: wrap; flex: 1; }
        .legend-item { display: flex; align-items: center; gap: 3px; font-size: 0.6rem; color: var(--text-secondary); cursor: pointer; padding: 2px 4px; border-radius: 4px; transition: all 0.15s; }
        .legend-item:hover { background: rgba(0,0,0,0.05); }
        .legend-item.active { background: var(--primary); color: white; }
        .dot { width: 8px; height: 8px; border-radius: 50%; }
        .dot.food { background: #ff6b6b; }
        .dot.cafe { background: #51cf66; }
        .dot.shop { background: #339af0; }
        .dot.drugstore { background: #f06595; }
        .dot.yen100 { background: #ff922b; }
        .dot.arcade { background: #845ef7; }
        .dot.attraction { background: #a66cff; }
        .dot.nightlife { background: #be4bdb; }
        .dot.transport { background: #fcc419; }
        .zoom-controls { display: flex; gap: 4px; }
        .zoom-btn { width: 28px; height: 28px; border: 2px solid var(--border); border-radius: 6px; background: var(--bg-card); cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
        .zoom-btn:hover { background: var(--primary); color: white; }
        .map-viewport { overflow: hidden; border-radius: var(--radius-sm); user-select: none; touch-action: none; }
        .map-area { position: relative; width: 100%; height: 320px; background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(245,245,245,0.9) 100%); transition: transform 0.3s ease; transform-origin: center center; }
        .map-poi { position: absolute; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: all 0.2s; z-index: 1; }
        .map-poi:hover { transform: translate(-50%, -50%) scale(1.3); z-index: 10; }
        .poi-emoji { font-size: 1rem; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)); }
        .poi-label { font-size: 0.5rem; background: rgba(255,255,255,0.95); padding: 1px 3px; border-radius: 3px; white-space: nowrap; box-shadow: 0 1px 2px rgba(0,0,0,0.15); margin-top: 1px; }
        .map-poi.hotel .poi-emoji { font-size: 1.5rem; }
        .map-poi.hotel .poi-label { font-weight: 700; background: var(--primary); color: white; font-size: 0.6rem; }
        .hotel-center { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 50px; height: 50px; z-index: 0; }
        .pulse-ring { position: absolute; width: 100%; height: 100%; border: 2px solid var(--primary); border-radius: 50%; animation: pulse 2s ease-out infinite; opacity: 0.5; }
        @keyframes pulse { 0% { transform: scale(0.5); opacity: 0.7; } 100% { transform: scale(2); opacity: 0; } }
    `;
    document.head.appendChild(style);
}

// ===== äºŒæœˆè¿‘éƒŠä¸€æ—¥éŠæ¨è–¦ =====
function addDayTripsSection() {
    const metroSection = document.getElementById('metro');
    if (!metroSection) return;
    
    const dayTrips = [
        {
            id: 'dazaifu',
            icon: 'ğŸŒ¸',
            name: 'å¤ªå®°åºœæ¢…èŠ±è³æ¢…',
            season: '1æœˆä¸‹æ—¬ï½2æœˆä¸Šæ—¬',
            color: '#e91e63',
            transport: 'è¥¿éµé›»è»Šç´„30åˆ†',
            highlights: ['6000æ ªæ¢…èŠ±', 'é£›æ¢…ç¥æ¨¹', 'æ¢…ãƒ¶æé¤…', 'ç«ˆé–€ç¥ç¤¾'],
            desc: 'å¤ªå®°åºœå¤©æ»¿å®®æ“æœ‰è¶…é6000æ ªæ¢…èŠ±ã€200å¤šå€‹å“ç¨®ã€‚æœ€è‘—åçš„æ˜¯æ¨¹é½¡è¶…é1000å¹´çš„ã€Œé£›æ¢…ã€ç¥æ¨¹ï¼Œå‚³èªªæ˜¯ä¸€å¤œä¹‹é–“å¾äº¬éƒ½é£›ä¾†çš„æ¢…èŠ±ã€‚åƒé“å¯å“åšã€Œæ¢…ãƒ¶æé¤…ã€ï¼Œæ­¥è¡Œ30åˆ†å¯é”ç«ˆé–€ç¥ç¤¾ã€‚',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=å¤ªå®°åºœå¤©æº€å®®'
        },
        {
            id: 'yanagawa',
            icon: 'ğŸ',
            name: 'æŸ³å·å¥³å…’ç¯€éŠèˆ¹',
            season: '2/11ï½4/3',
            color: '#9c27b0',
            transport: 'è¥¿éµé›»è»Šæˆ–æ°´éƒ½è™Ÿç´„1å°æ™‚',
            highlights: ['æŸ³å·éŠèˆ¹', 'SagemonåŠé£¾', 'æŸ³å·æ¯¬', 'é°»é­šé£¯'],
            desc: 'äºŒæœˆè‡³å››æœˆæ˜¯æŸ³å·å¥³å…’ç¯€æœŸé–“ã€‚æ­ä¹˜è§€å…‰åˆ—è»Šã€Œæ°´éƒ½ã€å‰å¾€æŸ³å·ï¼Œé«”é©—èˆ¹å¤«è·¨æ©‹è·³èˆ¹è¡¨æ¼”ï¼Œæ¬£è³å‚³çµ±ã€ŒSagemonã€å¸ƒè—è£é£¾ã€‚åˆé¤æ¨è–¦å…ƒç¥–æœ¬å‰å±‹é°»é­šé£¯ï¼Œå¯åƒè§€æŸ³å·è—©ä¸»ç«‹èŠ±é‚¸å¾¡èŠ±ã€‚',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=æŸ³å·å·ä¸‹ã‚Š'
        },
        {
            id: 'itoshima',
            icon: 'ğŸ–ï¸',
            name: 'ç³¸å³¶å±±æµ·æ”¾ç©º',
            season: 'å…¨å¹´é©åˆ',
            color: '#00bcd4',
            transport: 'JRç­‘è‚¥ç·šç´„45åˆ†+å·´å£«',
            highlights: ['ç™½çµ²ç€‘å¸ƒ', 'å¤«å©¦å²©', 'å››å­£èŒ¶å±‹', 'æµ·é‚Šå’–å•¡'],
            desc: 'è·é›¢ç¦å²¡ç´„40åˆ†é˜è»Šç¨‹çš„è¼•æ—…è¡Œè·¯ç·šã€‚ä¸Šåˆèµ°å±±ç·šåˆ°ç™½çµ²ç€‘å¸ƒè³æ™¯ï¼Œä¸­åˆåœ¨å››å­£èŒ¶å±‹äº«ç”¨å±±å¥³é­šè•éº¥éºµï¼Œåˆå¾Œæ²¿æµ·ç·šåˆ°æ«»äº•äºŒè¦‹æµ¦å¤«å©¦å²©æ‹ç…§ï¼Œå…©å¡Šå·¨çŸ³é–“çš„ç™½è‰²é³¥å±…æ˜¯ç³¸å³¶è±¡å¾µã€‚',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=ç³¸å³¶å¸‚'
        },
        {
            id: 'uminonakamichi',
            icon: 'ğŸ¬',
            name: 'æµ·ä¹‹ä¸­é“è¦ªå­ä¸€æ—¥éŠ',
            season: 'å…¨å¹´é©åˆ',
            color: '#2196f3',
            transport: 'JRé¦™æ¤ç·šç´„45åˆ†',
            highlights: ['æµ·æ´‹ä¸–ç•Œæ°´æ—é¤¨', 'æµ·è±šè¡¨æ¼”', 'å½©è™¹æºœæ»‘æ¢¯', 'å‹•ç‰©åœ’', 'è…³è¸è»Š'],
            desc: 'æœ€ç¶“å…¸çš„è¦ªå­çµ„åˆï¼æµ·æ´‹ä¸–ç•Œæœ‰350+ç¨®æµ·æ´‹ç”Ÿç‰©ï¼Œå®¤å…§æš–æ°£å……è¶³ã€‚æµ·æ¿±å…¬åœ’ç´„350å…¬é ƒï¼Œæœ‰è¶…é•·å½©è™¹æºœæ»‘æ¢¯ã€é–‹æ”¾å¼å‹•ç‰©åœ’å¯èˆ‡å°å‹•ç‰©äº’å‹•ï¼Œé‚„èƒ½ç§Ÿè…³è¸è»ŠéŠåœ’ã€‚é–€ç¥¨å¤§äººç´„Â¥2,500ã€å°å­©åŠåƒ¹ã€‚',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=ãƒãƒªãƒ³ãƒ¯ãƒ¼ãƒ«ãƒ‰æµ·ã®ä¸­é“'
        },
        {
            id: 'futsukaichi',
            icon: 'â™¨ï¸',
            name: 'äºŒæ—¥å¸‚æº«æ³‰æ³¡æ¹¯',
            season: 'å…¨å¹´é©åˆï¼ˆå†¬å­£æœ€ä½³ï¼‰',
            color: '#ff5722',
            transport: 'JRé¹¿å…’å³¶æœ¬ç·šç´„20åˆ†',
            highlights: ['1300å¹´æ­·å²', 'ç¾è‚Œä¹‹æ¹¯', 'åšå¤šæ¹¯', 'å¾¡å‰æ¹¯', 'Â¥300å…¥æµ´'],
            desc: 'ç¦å²¡è¿‘éƒŠæœ€æ–¹ä¾¿çš„æº«æ³‰ï¼1300å¹´æ­·å²ï¼Œæ›¾è¢«ã€Šè¬è‘‰é›†ã€‹æ”¶éŒ„ã€‚é¹¼æ€§å–®ç´”æº«æ³‰ã€Œç¾è‚Œä¹‹æ¹¯ã€ï¼Œå°ç¥ç¶“ç—›ã€çš®è†šç—…æœ‰ç™‚æ•ˆã€‚åšå¤šæ¹¯ã€å¾¡å‰æ¹¯å…¥æµ´è²»åƒ…Â¥300ã€‚å¯çµåˆå¤ªå®°åºœè¡Œç¨‹ï¼Œåƒæ‹œå¾Œæ³¡æ¹¯æ”¾é¬†ã€‚',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=äºŒæ—¥å¸‚æ¸©æ³‰'
        },
        {
            id: 'african-safari',
            icon: 'ğŸ¦',
            name: 'ä¹å·è‡ªç„¶å‹•ç‰©åœ’',
            season: 'å…¨å¹´ï¼ˆå†¬å­£10:00é–‹åœ’ï¼‰',
            color: '#795548',
            transport: 'å¤©ç¥â†’é«˜é€Ÿå·´å£«ç´„2.5hâ†’åˆ¥åºœâ†’é¾œä¹‹äº•å·´å£«41è™Ÿç´ˆ50åˆ†',
            highlights: ['å¢æ—å·´å£«', 'é¤µé£Ÿç…å­', 'é¤µé£Ÿå¤§è±¡', 'å°å‹•ç‰©äº’å‹•', 'åˆ¥åºœæº«æ³‰', 'åŒ…è»Šâ‰ˆå·´å£«åƒ¹'],
            desc: 'æ—¥æœ¬æœ€å¤§ç´šé‡ç”Ÿå‹•ç‰©åœ’ï¼å¿…æ­ã€Œå¢æ—å·´å£«ã€é¤µé£Ÿç…å­ã€å¤§è±¡ã€‚9äººåœ˜ç´”äº¤é€šï¼šåŒ…è»Šç´„Â¥8,900ï¼äººï¼Œå¤§çœ¾é‹è¼¸ç´„Â¥7,980ï¼äººï¼Œå·®ç´„Â¥1,000ã€‚è¦ªå­åœ˜æ¨è–¦åŒ…è»Šï¼ˆä¸ç”¨æ¬å¨ƒå¨ƒè»Šè¿½å·´å£«ï¼‰ï¼',
            mapUrl: 'https://www.google.com/maps/search/?api=1&query=ä¹å·è‡ªç„¶å‹•ç‰©å…¬åœ’ã‚¢ãƒ•ãƒªã‚«ãƒ³ã‚µãƒ•ã‚¡ãƒª',
            tips: 'å†¬å­£10:00é–‹åœ’ã€æœ€å¾Œå…¥åœ’15:00ãƒ»å¢æ—å·´å£«éœ€é–‹åœ’å‰30åˆ†æ’éšŠ',
            price: 'äº¤é€šç´„Â¥8-9Kï¼äººï½œé–€ç¥¨Â¥2,600ï½œå¢æ—å·´å£«Â¥1,300'
        }
    ];
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'day-trips';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸšƒ</span>äºŒæœˆè¿‘éƒŠä¸€æ—¥éŠ</h2>
        <p class="section-subtitle">ç¦å²¡å‘¨é‚Šç²¾é¸è·¯ç·šæ¨è–¦</p>
        
        <div class="day-trips-container">
            ${dayTrips.map(trip => `
                <div class="day-trip-card" style="--trip-color: ${trip.color}">
                    <div class="trip-header">
                        <span class="trip-icon">${trip.icon}</span>
                        <div class="trip-title-group">
                            <h3 class="trip-name">${trip.name}</h3>
                            <span class="trip-season">ğŸ—“ï¸ ${trip.season}</span>
                        </div>
                    </div>
                    <div class="trip-transport">
                        <span class="transport-icon">ğŸšƒ</span>
                        <span>${trip.transport}</span>
                    </div>
                    <p class="trip-desc">${trip.desc}</p>
                    <div class="trip-highlights">
                        ${trip.highlights.map(h => `<span class="highlight-chip">${h}</span>`).join('')}
                    </div>
                    <a href="${trip.mapUrl}" target="_blank" class="trip-map-btn" style="background: ${trip.color}">
                        ğŸ—ºï¸ æŸ¥çœ‹åœ°åœ–
                    </a>
                </div>
            `).join('')}
        </div>
        
        <div class="transport-summary">
            <h4>ğŸš‰ äº¤é€šæ–¹å¼</h4>
            <div class="transport-items">
                <div class="transport-item">
                    <span class="route-name">å¤ªå®°åºœ</span>
                    <span class="route-detail">åšå¤šç«™ â†’ è¥¿éµé›»è»Šç´„30åˆ†</span>
                </div>
                <div class="transport-item">
                    <span class="route-name">æŸ³å·</span>
                    <span class="route-detail">è¥¿éµé›»è»Šæˆ–è§€å…‰åˆ—è»Šã€Œæ°´éƒ½ã€ç´„1å°æ™‚</span>
                </div>
                <div class="transport-item">
                    <span class="route-name">ç³¸å³¶</span>
                    <span class="route-detail">JRç­‘è‚¥ç·šç´„45åˆ†+æ˜­å’Œå·´å£«ï¼Œæˆ–é«˜é€Ÿå·´å£«ç´„1å°æ™‚</span>
                </div>
                <div class="transport-item">
                    <span class="route-name">æµ·ä¹‹ä¸­é“</span>
                    <span class="route-detail">åšå¤šç«™ â†’ JRé¦™æ¤ç·šç´„45åˆ†</span>
                </div>
                <div class="transport-item">
                    <span class="route-name">äºŒæ—¥å¸‚</span>
                    <span class="route-detail">åšå¤šç«™ â†’ JRé¹¿å…’å³¶æœ¬ç·šç´„20åˆ† â†’ æ­¥è¡Œ15åˆ†</span>
                </div>
                <div class="transport-item">
                    <span class="route-name">å‹•ç‰©åœ’</span>
                    <span class="route-detail">å¤©ç¥â†’é«˜é€Ÿå·´å£«ç´„2.5hâ†’åˆ¥åºœâ†’å·´å£«ç´ˆ50åˆ†ï½œåŒ…è»Šâ‰ˆÂ¥8.9K vs å·´å£«â‰ˆÂ¥8Kï¼äºº</span>
                </div>
            </div>
        </div>
    `;
    
    metroSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .section-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: -8px;
            margin-bottom: 16px;
        }
        .day-trips-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .day-trip-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: var(--border-width) solid var(--border);
            padding: 16px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--trip-color);
        }
        .trip-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        .trip-icon {
            font-size: 2rem;
        }
        .trip-title-group {
            flex: 1;
        }
        .trip-name {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
        }
        .trip-season {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .trip-transport {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: var(--bg-elevated);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 10px;
        }
        .transport-icon {
            font-size: 0.9rem;
        }
        .trip-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 12px;
        }
        .trip-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }
        .highlight-chip {
            background: linear-gradient(135deg, var(--trip-color) 0%, color-mix(in srgb, var(--trip-color) 70%, white) 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .trip-map-btn {
            display: block;
            text-align: center;
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            padding: 10px;
            border-radius: var(--radius);
            text-decoration: none;
            transition: all 0.2s;
        }
        .trip-map-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .transport-summary {
            margin-top: 20px;
            background: var(--bg-elevated);
            border-radius: var(--radius);
            padding: 16px;
            border: 1px solid var(--border);
        }
        .transport-summary h4 {
            font-size: 0.9rem;
            margin-bottom: 12px;
        }
        .transport-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .transport-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.8rem;
        }
        .route-name {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 700;
            min-width: 50px;
            text-align: center;
        }
        .route-detail {
            color: var(--text-secondary);
        }
    `;
    document.head.appendChild(style);
}

// ===== å¯¦ç”¨æ—¥èª =====
function addPhrasesSection() {
    const emergencySection = document.getElementById('emergency');
    
    const phrases = [
        { jp: 'ã™ã¿ã¾ã›ã‚“', read: 'Sumimasen', tw: 'ä¸å¥½æ„æ€/å°ä¸èµ·' },
        { jp: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™', read: 'Arigatou gozaimasu', tw: 'éå¸¸æ„Ÿè¬' },
        { jp: 'ã“ã‚Œã‚’ãã ã•ã„', read: 'Kore wo kudasai', tw: 'è«‹çµ¦æˆ‘é€™å€‹' },
        { jp: 'ã„ãã‚‰ã§ã™ã‹ï¼Ÿ', read: 'Ikura desu ka?', tw: 'å¤šå°‘éŒ¢ï¼Ÿ' },
        { jp: 'ãŠä¼šè¨ˆãŠé¡˜ã„ã—ã¾ã™', read: 'Okaikei onegaishimasu', tw: 'è«‹çµå¸³' },
        { jp: 'ãƒˆã‚¤ãƒ¬ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', read: 'Toire wa doko desu ka?', tw: 'å»æ‰€åœ¨å“ªè£¡ï¼Ÿ' },
        { jp: 'å†™çœŸã‚’æ’®ã£ã¦ã‚‚ã„ã„ã§ã™ã‹ï¼Ÿ', read: 'Shashin wo tottemo ii desu ka?', tw: 'å¯ä»¥æ‹ç…§å—ï¼Ÿ' },
        { jp: 'ã€‡ã€‡é§…ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', read: 'ã€‡ã€‡ eki wa doko desu ka?', tw: 'ã€‡ã€‡ç«™åœ¨å“ªè£¡ï¼Ÿ' },
        { jp: 'æ›¿ç‰ãŠé¡˜ã„ã—ã¾ã™', read: 'Kaedama onegaishimasu', tw: 'è«‹åŠ éºµï¼ˆæ‹‰éºµåº—ï¼‰' },
        { jp: 'è¾›ã„ã®ã¯æŠœãã§', read: 'Karai no wa nuki de', tw: 'ä¸è¦è¾£' }
    ];
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'phrases';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ—£ï¸</span>å¯¦ç”¨æ—¥èª</h2>
        <p class="phrases-hint">ğŸ‘† é»æ“Š ğŸ”Š è†è½ç™¼éŸ³</p>
        <div class="phrases-list">
            ${phrases.map((p, i) => `
                <div class="phrase-card">
                    <div class="phrase-main">
                        <div class="phrase-text">
                            <div class="phrase-jp">${p.jp}</div>
                            <div class="phrase-read">${p.read}</div>
                            <div class="phrase-tw">${p.tw}</div>
                        </div>
                        <button class="speak-btn" onclick="speakJapanese('${p.jp.replace(/'/g, "\\'")}')">
                            ğŸ”Š
                        </button>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    
    emergencySection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .phrases-hint {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 12px;
            text-align: center;
        }
        .phrases-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .phrase-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
        }
        .phrase-main {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .phrase-text {
            flex: 1;
        }
        .phrase-jp {
            font-size: 1.15rem;
            font-weight: 900;
            margin-bottom: 4px;
        }
        .phrase-read {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-bottom: 4px;
            font-weight: 700;
        }
        .phrase-tw {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .speak-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--border);
            background: var(--accent);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 3px 3px 0px var(--border);
            transition: all 0.15s;
        }
        .speak-btn:hover {
            transform: scale(1.1);
        }
        .speak-btn:active {
            transform: scale(0.95);
            box-shadow: 1px 1px 0px var(--border);
        }
        .speak-btn.speaking {
            background: var(--primary);
            animation: pulse 0.5s ease infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    `;
    document.head.appendChild(style);
}

// ===== é£¯åº—é™„è¿‘æ¨è–¦ =====
function addNearbySection() {
    const foodSection = document.getElementById('food');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'nearby';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ“</span>é£¯åº—é™„è¿‘æ¨è–¦</h2>
        <div class="nearby-list">
            ${nearbyData.map(n => `
                <div class="nearby-card">
                    <div class="nearby-icon">${n.icon}</div>
                    <div class="nearby-info">
                        <div class="nearby-header">
                            <h4>${n.name}</h4>
                            <span class="nearby-tag">${n.tag}</span>
                        </div>
                        <p class="nearby-desc">${n.desc}</p>
                        <p class="nearby-note">ğŸ’¡ ${n.note}</p>
                        <p class="nearby-addr">ğŸ“ ${n.addr}</p>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n.map)}" 
                       target="_blank" class="map-link">
                        ğŸ—ºï¸
                    </a>
                </div>
            `).join('')}
        </div>
    `;
    
    foodSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .nearby-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .nearby-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
        }
        .nearby-icon { font-size: 2.2rem; flex-shrink: 0; }
        .nearby-info { flex: 1; min-width: 0; }
        .nearby-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap; }
        .nearby-header h4 { font-size: 1rem; font-weight: 900; }
        .nearby-tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.65rem;
            font-weight: 900;
            padding: 2px 8px;
            border-radius: 10px;
        }
        .nearby-desc { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px; }
        .nearby-note { font-size: 0.75rem; color: var(--orange); font-weight: 700; margin-bottom: 4px; }
        .nearby-addr { font-size: 0.7rem; color: var(--text-muted); }
    `;
    document.head.appendChild(style);
}

// ===== æ—¥èªç™¼éŸ³åŠŸèƒ½ =====
function speakJapanese(text) {
    // æª¢æŸ¥ç€è¦½å™¨æ˜¯å¦æ”¯æ´
    if (!('speechSynthesis' in window)) {
        alert('æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åŠŸèƒ½');
        return;
    }
    
    // åœæ­¢æ­£åœ¨æ’­æ”¾çš„èªéŸ³
    window.speechSynthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'ja-JP';
    utterance.rate = 0.8; // ç¨å¾®æ”¾æ…¢é€Ÿåº¦
    utterance.pitch = 1;
    
    // å˜—è©¦ä½¿ç”¨æ—¥èªèªéŸ³
    const voices = window.speechSynthesis.getVoices();
    const japaneseVoice = voices.find(v => v.lang.includes('ja'));
    if (japaneseVoice) {
        utterance.voice = japaneseVoice;
    }
    
    // æ’­æ”¾å‹•ç•«
    const buttons = document.querySelectorAll('.speak-btn');
    buttons.forEach(btn => btn.classList.remove('speaking'));
    event.target.closest('.speak-btn').classList.add('speaking');
    
    utterance.onend = () => {
        event.target.closest('.speak-btn').classList.remove('speaking');
    };
    
    window.speechSynthesis.speak(utterance);
}

// é è¼‰èªéŸ³åˆ—è¡¨
if ('speechSynthesis' in window) {
    window.speechSynthesis.getVoices();
}


// ===== ä¼´æ‰‹ç¦®å€å¡Š =====
function addSouvenirSection() {
    const nearbySection = document.getElementById('nearby');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'souvenir';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ</span>å¿…è²·ä¼´æ‰‹ç¦®</h2>
        <div class="souvenir-scroll">
            ${souvenirData.map(s => `
                <div class="souvenir-card">
                    <div class="souvenir-icon">${s.icon}</div>
                    <h4>${s.name}</h4>
                    <p class="souvenir-desc">${s.desc}</p>
                    <p class="souvenir-where">ğŸ“ ${s.where}</p>
                </div>
            `).join('')}
        </div>
    `;
    
    nearbySection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .souvenir-scroll {
            display: flex;
            gap: 14px;
            overflow-x: auto;
            padding-bottom: 12px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .souvenir-scroll::-webkit-scrollbar { display: none; }
        .souvenir-card {
            flex-shrink: 0;
            width: 150px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 18px 14px;
            text-align: center;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            transition: all 0.15s;
        }
        .souvenir-card:nth-child(odd) { transform: rotate(-1deg); }
        .souvenir-card:nth-child(even) { transform: rotate(1deg); }
        .souvenir-card:hover {
            transform: translateY(-4px) rotate(0deg);
        }
        .souvenir-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .souvenir-card h4 { font-size: 0.95rem; font-weight: 900; margin-bottom: 6px; }
        .souvenir-desc { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 6px; }
        .souvenir-where { font-size: 0.7rem; color: var(--orange); font-weight: 700; }
    `;
    document.head.appendChild(style);
}

// ===== é£¯åº—é™„è¿‘è³¼ç‰© =====
function addShoppingSection() {
    const souvenirSection = document.getElementById('souvenir');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'shopping';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ›’</span>é£¯åº—é™„è¿‘è³¼ç‰©</h2>
        <div class="shopping-list">
            ${shoppingData.map(s => `
                <div class="shopping-card">
                    <div class="shopping-icon">${s.icon}</div>
                    <div class="shopping-info">
                        <h4>${s.name}</h4>
                        <p class="shopping-desc">${s.desc}</p>
                        <p class="shopping-addr">ğŸ“ ${s.addr}</p>
                        <p class="shopping-hours">â° ${s.hours}</p>
                        <p class="shopping-distance">${s.distance}</p>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.map)}" 
                       target="_blank" class="map-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        å°èˆª
                    </a>
                </div>
            `).join('')}
        </div>
    `;
    
    souvenirSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .shopping-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .shopping-card {
            display: flex;
            align-items: center;
            gap: 14px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
        }
        .shopping-icon { font-size: 2.5rem; }
        .shopping-info { flex: 1; }
        .shopping-info h4 { font-size: 1rem; font-weight: 900; margin-bottom: 4px; }
        .shopping-desc { font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px; }
        .shopping-addr { font-size: 0.75rem; color: var(--text-muted); }
        .shopping-hours { font-size: 0.75rem; color: var(--secondary); font-weight: 700; }
        .shopping-distance { font-size: 0.8rem; color: var(--primary); font-weight: 900; }
    `;
    document.head.appendChild(style);
}

// ===== è—¥å¦åº—å€å¡Š =====
function addDrugstoreSection() {
    const shoppingSection = document.getElementById('shopping');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'drugstore';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ’Š</span>è—¥å¦åº—å„ªæƒ æ’è¡Œ</h2>
        <p class="drugstore-tip">ğŸ’¡ è²·æ»¿ Â¥5,000 å¯è¾¦ç†å…ç¨…ï¼ˆçœ10%ï¼‰</p>
        <div class="drugstore-list">
            ${drugstoreData.map(d => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d.map)}" 
                   target="_blank" class="drugstore-card">
                    <div class="drugstore-icon">${d.icon}</div>
                    <div class="drugstore-info">
                        <div class="drugstore-header">
                            <h4>${d.name}</h4>
                            <span class="drugstore-tag">${d.tag}</span>
                        </div>
                        <p class="drugstore-desc">${d.desc}</p>
                        <p class="drugstore-detail">ğŸ“ ${d.addr} â° ${d.hours}</p>
                    </div>
                    <span class="drugstore-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
    `;
    
    shoppingSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .drugstore-tip {
            font-size: 0.85rem;
            color: var(--orange);
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
        }
        .drugstore-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .drugstore-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .drugstore-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .drugstore-icon { font-size: 2rem; }
        .drugstore-info { flex: 1; min-width: 0; }
        .drugstore-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap; }
        .drugstore-header h4 { font-size: 0.9rem; font-weight: 900; }
        .drugstore-tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .drugstore-desc { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 2px; }
        .drugstore-detail { font-size: 0.7rem; color: var(--text-muted); }
        .drugstore-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
    `;
    document.head.appendChild(style);
}

// ===== 100å††å•†åº—å€å¡Š =====
function add100YenSection() {
    const drugstoreSection = document.getElementById('drugstore');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'hundredyen';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ’¯</span>100å††å•†åº—</h2>
        <div class="hundredyen-list">
            ${hundredYenData.map(s => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(s.map)}" 
                   target="_blank" class="hundredyen-card">
                    <div class="hundredyen-icon">${s.icon}</div>
                    <div class="hundredyen-info">
                        <div class="hundredyen-header">
                            <span class="hundredyen-brand">${s.brand}</span>
                            <h4>${s.name}</h4>
                            ${s.tag ? `<span class="hundredyen-tag">${s.tag}</span>` : ''}
                        </div>
                        <p class="hundredyen-detail">ğŸ“ ${s.addr} â° ${s.hours}</p>
                    </div>
                    <span class="hundredyen-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
    `;
    
    drugstoreSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .hundredyen-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .hundredyen-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .hundredyen-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .hundredyen-icon { font-size: 1.5rem; }
        .hundredyen-info { flex: 1; min-width: 0; }
        .hundredyen-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap; }
        .hundredyen-brand { font-size: 0.75rem; font-weight: 900; color: var(--primary); }
        .hundredyen-header h4 { font-size: 0.85rem; font-weight: 700; }
        .hundredyen-tag {
            display: inline-block;
            background: var(--orange);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .hundredyen-detail { font-size: 0.7rem; color: var(--text-muted); }
        .hundredyen-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
    `;
    document.head.appendChild(style);
}

// ===== æœé£¾åº—å€å¡Š =====
function addClothingSection() {
    const hundredyenSection = document.getElementById('hundredyen');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'clothing';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ‘”</span>æœé£¾åº—</h2>
        <div class="clothing-list">
            ${clothingData.map(c => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c.map)}" 
                   target="_blank" class="clothing-card">
                    <div class="clothing-icon">${c.icon}</div>
                    <div class="clothing-info">
                        <div class="clothing-header">
                            <span class="clothing-brand">${c.brand}</span>
                            <h4>${c.name}</h4>
                            ${c.tag ? `<span class="clothing-tag">${c.tag}</span>` : ''}
                        </div>
                        <p class="clothing-floor">ğŸ“ ${c.floor}</p>
                    </div>
                    <span class="clothing-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
    `;
    
    hundredyenSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .clothing-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .clothing-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .clothing-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .clothing-icon { font-size: 1.5rem; }
        .clothing-info { flex: 1; min-width: 0; }
        .clothing-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap; }
        .clothing-brand { font-size: 0.75rem; font-weight: 900; color: var(--primary); }
        .clothing-header h4 { font-size: 0.85rem; font-weight: 700; }
        .clothing-tag {
            display: inline-block;
            background: var(--secondary);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .clothing-floor { font-size: 0.7rem; color: var(--text-muted); }
        .clothing-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
    `;
    document.head.appendChild(style);
}

function addJinsSection() {
    const clothingSection = document.getElementById('clothing');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'jins';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ‘“</span>JINS çœ¼é¡</h2>
        <p class="section-subtitle">å¿«é€Ÿé…é¡ãƒ»30åˆ†é˜å–ä»¶ãƒ»å…ç¨…è³¼ç‰©</p>
        <div class="jins-list">
            ${jinsData.map(j => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j.map)}" 
                   target="_blank" class="jins-card ${j.recommended ? 'jins-recommended' : ''}">
                    <div class="jins-icon">${j.icon}</div>
                    <div class="jins-info">
                        <div class="jins-header">
                            <h4>${j.name}</h4>
                            ${j.tag ? `<span class="jins-tag">${j.tag}</span>` : ''}
                        </div>
                        <p class="jins-addr">ğŸ“ ${j.addr}</p>
                        <p class="jins-hours">ğŸ• ${j.hours}</p>
                        <p class="jins-phone">ğŸ“ ${j.phone}</p>
                        <p class="jins-rating">${j.rating}</p>
                        <p class="jins-note">ğŸ’¡ ${j.note}</p>
                    </div>
                    <span class="jins-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
    `;
    
    clothingSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .section-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin: -8px 0 12px 0;
            padding-left: 2px;
        }
        .jins-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .jins-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .jins-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .jins-recommended {
            border-color: var(--primary);
            box-shadow: 4px 4px 0px var(--primary);
        }
        .jins-icon { font-size: 1.8rem; margin-top: 4px; }
        .jins-info { flex: 1; min-width: 0; }
        .jins-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; flex-wrap: wrap; }
        .jins-header h4 { font-size: 0.9rem; font-weight: 700; }
        .jins-tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .jins-addr, .jins-hours, .jins-phone { font-size: 0.7rem; color: var(--text-secondary); margin: 2px 0; }
        .jins-rating { font-size: 0.7rem; color: var(--secondary); font-weight: 600; margin: 4px 0; }
        .jins-note { font-size: 0.7rem; color: var(--text-muted); margin-top: 4px; }
        .jins-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; margin-top: 8px; }
    `;
    document.head.appendChild(style);
}

function addMounjaroSection() {
    const jinsSection = document.getElementById('jins');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'mounjaro';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ’‰</span>Mounjaro æ¸›é‡è¨ºæ‰€</h2>
        <p class="section-subtitle">ãƒãƒ³ã‚¸ãƒ£ãƒ­ï¼ˆTirzepatideï¼‰è™•æ–¹ãƒ»Il Palazzo é£¯åº—é™„è¿‘</p>
        
        <div class="mounjaro-notice">
            <div class="notice-icon">âš ï¸</div>
            <div class="notice-content">
                <strong>æ³¨æ„äº‹é …</strong>
                <ul>
                    <li>æ—¥æœ¬ Mounjaro ç‚ºè™•æ–¹è—¥ï¼Œéœ€é†«å¸«è¨ºæ–·ï¼ˆç³–å°¿ç—…æˆ–BMIé©æ ¼ï¼‰</li>
                    <li>è²»ç”¨ç´„ Â¥20,000-40,000/æœˆï¼ˆå«è¨ºå¯Ÿè²»ï¼‰</li>
                    <li>æ—…å®¢æ†‘è­·ç…§å³å¯å°±è¨º</li>
                    <li>å»ºè­°å‡ºç™¼å‰ç¢ºèªè¨ºæ‰€åœ°å€åŠé ç´„æ–¹å¼</li>
                </ul>
            </div>
        </div>
        
        <div class="mounjaro-list">
            ${mounjaroClinicData.map(c => `
                <${c.map ? 'a' : 'div'} ${c.map ? `href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(c.map)}" target="_blank"` : ''} 
                   class="mounjaro-card ${c.recommended ? 'mounjaro-recommended' : ''}">
                    <div class="mounjaro-icon">${c.icon}</div>
                    <div class="mounjaro-info">
                        <div class="mounjaro-header">
                            <h4>${c.name}</h4>
                            ${c.tag ? `<span class="mounjaro-tag">${c.tag}</span>` : ''}
                        </div>
                        <p class="mounjaro-addr">ğŸ“ ${c.addr}</p>
                        <p class="mounjaro-hours">ğŸ• ${c.hours}</p>
                        <p class="mounjaro-distance">ğŸš¶ ${c.distance}</p>
                        <p class="mounjaro-phone">ğŸ“ ${c.phone}</p>
                        <p class="mounjaro-note">ğŸ’¡ ${c.note}</p>
                    </div>
                    ${c.map ? '<span class="mounjaro-arrow">â†’</span>' : ''}
                </${c.map ? 'a' : 'div'}>
            `).join('')}
        </div>
    `;
    
    jinsSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .mounjaro-notice {
            display: flex;
            gap: 12px;
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.15), rgba(255, 152, 0, 0.1));
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 16px;
        }
        .notice-icon { font-size: 1.5rem; }
        .notice-content ul {
            margin: 8px 0 0 0;
            padding-left: 18px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        .notice-content li { margin: 4px 0; }
        .notice-content strong { font-size: 0.85rem; color: var(--text-primary); }
        
        .mounjaro-list { display: flex; flex-direction: column; gap: 12px; }
        .mounjaro-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: var(--card-bg);
            border-radius: 14px;
            padding: 14px;
            text-decoration: none;
            color: inherit;
            border: 1px solid var(--border-light);
            transition: all 0.3s ease;
        }
        a.mounjaro-card:hover {
            transform: translateX(4px);
            border-color: var(--secondary);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .mounjaro-recommended {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.05));
            border-color: var(--secondary);
        }
        .mounjaro-icon { font-size: 2rem; }
        .mounjaro-info { flex: 1; min-width: 0; }
        .mounjaro-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; flex-wrap: wrap; }
        .mounjaro-header h4 { font-size: 0.9rem; font-weight: 700; }
        .mounjaro-tag {
            display: inline-block;
            background: var(--secondary);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .mounjaro-addr, .mounjaro-hours, .mounjaro-phone, .mounjaro-distance { font-size: 0.7rem; color: var(--text-secondary); margin: 2px 0; }
        .mounjaro-note { font-size: 0.7rem; color: var(--text-muted); margin-top: 4px; }
        .mounjaro-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; margin-top: 8px; }
    `;
    document.head.appendChild(style);
}

function addDessertSection() {
    const mounjaroSection = document.getElementById('mounjaro');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'dessert';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ°</span>å¿…åƒç”œé»</h2>
        <div class="dessert-scroll">
            ${dessertData.map(d => `
                <div class="dessert-card">
                    <div class="dessert-icon">${d.icon}</div>
                    <h4>${d.name}</h4>
                    <p class="dessert-desc">${d.desc}</p>
                    <span class="dessert-tag">${d.tag}</span>
                    <p class="dessert-addr">ğŸ“ ${d.addr}</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(d.map)}" 
                       target="_blank" class="dessert-map-btn">
                        ğŸ—ºï¸ å°èˆª
                    </a>
                </div>
            `).join('')}
        </div>
    `;
    
    mounjaroSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .dessert-scroll {
            display: flex;
            gap: 14px;
            overflow-x: auto;
            padding-bottom: 12px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .dessert-scroll::-webkit-scrollbar { display: none; }
        .dessert-card {
            flex-shrink: 0;
            width: 160px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 16px 14px;
            text-align: center;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            transition: all 0.15s;
        }
        .dessert-card:nth-child(odd) { transform: rotate(-1deg); }
        .dessert-card:nth-child(even) { transform: rotate(1deg); }
        .dessert-card:hover {
            transform: translateY(-4px) rotate(0deg);
        }
        .dessert-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .dessert-card h4 { font-size: 0.9rem; font-weight: 900; margin-bottom: 6px; }
        .dessert-desc { font-size: 0.7rem; color: var(--text-secondary); margin-bottom: 6px; line-height: 1.4; }
        .dessert-tag {
            display: inline-block;
            background: var(--pink);
            color: white;
            font-size: 0.65rem;
            font-weight: 900;
            padding: 3px 8px;
            border-radius: 10px;
            margin-bottom: 6px;
        }
        .dessert-addr { font-size: 0.7rem; color: var(--text-muted); margin-bottom: 8px; }
        .dessert-map-btn {
            display: inline-block;
            background: var(--secondary);
            color: white;
            font-size: 0.75rem;
            font-weight: 900;
            padding: 6px 12px;
            border-radius: 15px;
            text-decoration: none;
            border: 2px solid var(--border);
            transition: all 0.15s;
        }
        .dessert-map-btn:hover {
            background: var(--primary);
            transform: scale(1.05);
        }
    `;
    document.head.appendChild(style);
}

// ===== è‰è“æ¨è–¦å€å¡Š =====
function addStrawberrySection() {
    const dessertSection = document.getElementById('dessert');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'strawberry';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ“</span>2æœˆå¿…åƒï¼šç”˜ç‹è‰è“</h2>
        <p class="strawberry-subtitle">ç¦å²¡ç¨å®¶ãƒ»1-2æœˆæ­£æ˜¯æœ€ä½³å“åšæœŸï¼</p>
        
        <div class="strawberry-hero">
            <div class="strawberry-badge">è‰è“ä¹‹ç‹ ğŸ‘‘</div>
            <h3>${strawberryData.featured.japanese}</h3>
            <p class="strawberry-meaning">${strawberryData.featured.meaning}</p>
            <div class="strawberry-stats">
                <div class="stat-item">
                    <span class="stat-value">${strawberryData.featured.sweetness}</span>
                    <span class="stat-label">ç”œåº¦</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">${strawberryData.featured.season.split('ï¼ˆ')[1].replace('ï¼‰','')}</span>
                    <span class="stat-label">æœ€ä½³æœŸ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">ç¦å²¡é™å®š</span>
                    <span class="stat-label">ç”¢åœ°</span>
                </div>
            </div>
        </div>
        
        <div class="strawberry-features">
            ${strawberryData.featured.features.map(f => `<span class="feature-tag">âœ¨ ${f}</span>`).join('')}
        </div>
        
        <h4 class="strawberry-subtitle-sm">ğŸ†š æ—¥æœ¬è‰è“å“ç¨®æ¯”è¼ƒ</h4>
        <div class="strawberry-compare">
            ${strawberryData.comparison.map(s => `
                <div class="compare-row ${s.name === 'ç”˜ç‹' ? 'highlight' : ''}">
                    <span class="compare-name">${s.name}</span>
                    <span class="compare-origin">${s.origin}</span>
                    <span class="compare-feature">${s.feature}</span>
                    <span class="compare-rating">${'â­'.repeat(s.rating)}</span>
                </div>
            `).join('')}
        </div>
        
        <h4 class="strawberry-subtitle-sm">ğŸ›’ å“ªè£¡è²·ï¼Ÿ</h4>
        <div class="strawberry-buy">
            ${strawberryData.whereToBuy.map(b => `
                <div class="buy-item">
                    <span class="buy-place">${b.place}</span>
                    <span class="buy-note">${b.note}</span>
                </div>
            `).join('')}
        </div>
        
        <div class="strawberry-tips">
            <h4>ğŸ’¡ å“åšå°æŠ€å·§</h4>
            ${strawberryData.featured.tips.map(t => `<p>â€¢ ${t}</p>`).join('')}
        </div>
    `;
    
    dessertSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .strawberry-subtitle {
            font-size: 0.85rem;
            color: var(--primary);
            margin-bottom: 16px;
            font-weight: 600;
        }
        .strawberry-hero {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            color: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            margin-bottom: 16px;
        }
        .strawberry-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 8px;
        }
        .strawberry-hero h3 {
            font-size: 1.3rem;
            margin-bottom: 4px;
        }
        .strawberry-meaning {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-bottom: 12px;
        }
        .strawberry-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            display: block;
            font-size: 0.9rem;
            font-weight: 700;
        }
        .stat-label {
            font-size: 0.65rem;
            opacity: 0.8;
        }
        .strawberry-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }
        .feature-tag {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
        }
        .strawberry-subtitle-sm {
            font-size: 0.9rem;
            font-weight: 700;
            margin: 12px 0 8px;
        }
        .strawberry-compare {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 16px;
        }
        .compare-row {
            display: grid;
            grid-template-columns: 60px 50px 1fr auto;
            gap: 8px;
            padding: 10px 12px;
            border-bottom: 1px solid var(--border);
            font-size: 0.75rem;
            align-items: center;
        }
        .compare-row:last-child { border-bottom: none; }
        .compare-row.highlight {
            background: rgba(255,107,107,0.1);
        }
        .compare-name { font-weight: 700; }
        .compare-origin { color: var(--text-muted); }
        .compare-feature { color: var(--text-secondary); }
        .compare-rating { font-size: 0.65rem; }
        .strawberry-buy {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 16px;
        }
        .buy-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 12px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-size: 0.8rem;
        }
        .buy-place { font-weight: 600; }
        .buy-note { color: var(--secondary); font-weight: 600; }
        .strawberry-tips {
            background: linear-gradient(135deg, rgba(255,107,107,0.1) 0%, rgba(255,193,193,0.1) 100%);
            border-radius: var(--radius);
            padding: 12px 16px;
        }
        .strawberry-tips h4 {
            font-size: 0.85rem;
            margin-bottom: 8px;
        }
        .strawberry-tips p {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
    `;
    document.head.appendChild(style);
}

// ===== åœ°éµäº¤é€šå€å¡Š =====
function addMetroSection() {
    const dessertSection = document.getElementById('dessert');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'metro';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸš‡</span>åœ°éµäº¤é€š</h2>
        
        <h3 class="metro-subtitle">ğŸ“ é£¯åº—æœ€è¿‘è»Šç«™</h3>
        <div class="metro-stations">
            ${metroData.stations.map(s => `
                <div class="station-card">
                    <div class="station-line">${s.line}</div>
                    <div class="station-info">
                        <h4>${s.name}</h4>
                        <p>${s.exit} â€¢ ${s.distance}</p>
                    </div>
                    <span class="station-note">${s.note}</span>
                </div>
            `).join('')}
        </div>
        
        <h3 class="metro-subtitle">ğŸ—ºï¸ è¡Œç¨‹å¸¸ç”¨è·¯ç·š</h3>
        <div class="metro-routes">
            ${metroData.routes.map(r => `
                <div class="route-row">
                    <span class="route-line">${r.line}</span>
                    <span class="route-dest">${r.dest}</span>
                    <span class="route-time">${r.time}</span>
                    <span class="route-fare">${r.fare}</span>
                </div>
            `).join('')}
        </div>
        
        <h3 class="metro-subtitle">ğŸ« ç¥¨åƒ¹å„ªæƒ </h3>
        <div class="ticket-list">
            ${metroData.tickets.map(t => `
                <div class="ticket-card">
                    <span class="ticket-name">${t.name}</span>
                    <span class="ticket-price">${t.price}</span>
                    <span class="ticket-note">${t.note}</span>
                </div>
            `).join('')}
        </div>
        
        <h3 class="metro-subtitle">ğŸŸï¸ æ¨è–¦å‘¨éŠåˆ¸</h3>
        <div class="pass-list">
            ${passData.map(p => `
                <div class="pass-card ${p.recommended ? 'recommended' : ''}">
                    <div class="pass-icon">${p.icon}</div>
                    <div class="pass-info">
                        <h4>${p.name} ${p.recommended ? '<span class="pass-badge">æ¨è–¦</span>' : ''}</h4>
                        <p class="pass-price">${p.price}</p>
                        <p class="pass-includes">${p.includes}</p>
                        <p class="pass-use">ğŸ“… ${p.useDay}</p>
                        <p class="pass-save">ğŸ’° ${p.save}</p>
                    </div>
                </div>
            `).join('')}
        </div>
        
        <a href="https://www.google.com/maps/search/?api=1&query=ç¦å²¡å¸‚åœ°ä¸‹é‰„+å¤©ç¥é§…" 
           target="_blank" class="metro-map-btn">ğŸ—ºï¸ é–‹å•Ÿå¤©ç¥ç«™åœ°åœ–</a>
    `;
    
    dessertSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .metro-subtitle {
            font-size: 0.95rem;
            font-weight: 900;
            margin: 16px 0 10px;
            color: var(--text-primary);
        }
        .metro-stations {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .station-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            padding: 12px 14px;
            border: var(--border-width) solid var(--border);
        }
        .station-line { font-size: 0.8rem; font-weight: 900; white-space: nowrap; }
        .station-info { flex: 1; }
        .station-info h4 { font-size: 0.9rem; font-weight: 900; }
        .station-info p { font-size: 0.75rem; color: var(--text-secondary); }
        .station-note { font-size: 0.7rem; color: var(--primary); font-weight: 900; }
        
        .metro-routes {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: var(--border-width) solid var(--border);
            overflow: hidden;
        }
        .route-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            border-bottom: 1px solid var(--border);
        }
        .route-row:last-child { border-bottom: none; }
        .route-line { font-size: 1rem; }
        .route-dest { flex: 1; font-size: 0.85rem; font-weight: 700; }
        .route-time { font-size: 0.8rem; color: var(--secondary); font-weight: 900; }
        .route-fare { font-size: 0.75rem; color: var(--text-muted); }
        
        .ticket-list {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 8px;
        }
        .ticket-card {
            flex: 0 0 auto;
            min-width: 120px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            color: white;
            border-radius: var(--radius);
            padding: 12px;
            text-align: center;
            border: var(--border-width) solid var(--border);
        }
        .ticket-name { display: block; font-size: 0.8rem; font-weight: 900; margin-bottom: 4px; }
        .ticket-price { display: block; font-size: 1.1rem; font-weight: 900; margin-bottom: 2px; }
        .ticket-note { display: block; font-size: 0.65rem; opacity: 0.9; }
        
        .pass-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .pass-card {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px;
            border: var(--border-width) solid var(--border);
        }
        .pass-card.recommended {
            background: linear-gradient(135deg, rgba(255,113,206,0.1) 0%, rgba(1,205,254,0.1) 100%);
            border-color: var(--primary);
        }
        .pass-icon { font-size: 2rem; }
        .pass-info { flex: 1; }
        .pass-info h4 { font-size: 0.9rem; font-weight: 900; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
        .pass-badge {
            display: inline-block;
            background: var(--orange);
            color: white;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .pass-price { font-size: 1rem; font-weight: 900; color: var(--primary); margin-bottom: 4px; }
        .pass-includes { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 4px; }
        .pass-use { font-size: 0.7rem; color: var(--secondary); font-weight: 700; margin-bottom: 2px; }
        .pass-save { font-size: 0.7rem; color: var(--orange); font-weight: 700; }
        
        .metro-map-btn {
            display: block;
            text-align: center;
            background: var(--orange);
            color: white;
            font-weight: 900;
            padding: 12px;
            border-radius: var(--radius);
            text-decoration: none;
            margin-top: 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 3px 3px 0 var(--border);
        }
    `;
    document.head.appendChild(style);
}

// ===== äº¤é€šè·¯ç·šåœ–å€å¡Š =====
function addTransportMapsSection() {
    const metroSection = document.getElementById('metro');
    
    const transportMapsData = [
        {
            id: 'shuttle',
            icon: 'ğŸšŒ',
            name: 'æ©Ÿå ´æ¥é§å·´å£«',
            desc: 'åœ‹éš›ç·šâ‡„åœ‹å…§ç·š å…è²»æ¥é§',
            note: 'ç´„10-15åˆ†é˜è»Šç¨‹',
            image: 'åœ‹å…§ç·šãƒ»åœ‹éš›ç·šæ¥é§å·´å£«é‹è¡Œè·¯ç·šåœ–.png'
        },
        {
            id: 'subway',
            icon: 'ğŸš‡',
            name: 'ç¦å²¡åœ°éµè·¯ç·šåœ–',
            desc: 'ç©ºæ¸¯ç·šãƒ»ç®±å´ç·šãƒ»ä¸ƒéšˆç·š',
            note: 'æ©Ÿå ´â†’å¤©ç¥ ç´„11åˆ† Â¥260',
            image: 'ç¦å²¡åœ°éµ.png'
        },
        {
            id: 'nishitetsu',
            icon: 'ğŸšƒ',
            name: 'è¥¿éµé›»è»Šè·¯ç·šåœ–',
            desc: 'å¤©ç¥å¤§ç‰Ÿç”°ç·šãƒ»å¤ªå®°åºœç·š',
            note: 'å¾€å¤ªå®°åºœãƒ»æŸ³å·å¿…æ­',
            image: 'è¥¿éµ.png'
        },
        {
            id: 'taxi',
            icon: 'ğŸš•',
            name: 'è¨ˆç¨‹è»Šä¹˜è»Šè™•',
            desc: 'åœ‹éš›ç·šèˆªå»ˆ1æ¨“',
            note: 'æ©Ÿå ´â†’å¤©ç¥ ç´„Â¥3,000-3,500',
            image: 'è¨ˆç¨‹è»Š(åœ‹éš›ç·š).png'
        }
    ];
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'transport-maps';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ—ºï¸</span>äº¤é€šè·¯ç·šåœ–</h2>
        <p class="section-desc">é»æ“ŠæŸ¥çœ‹å¤§åœ–</p>
        <div class="transport-maps-grid">
            ${transportMapsData.map(m => `
                <div class="transport-map-card" onclick="openTransportMapModal('${m.image}', '${m.name}')">
                    <div class="map-thumb">
                        <img src="${m.image}" alt="${m.name}" loading="lazy">
                        <div class="map-overlay">
                            <span class="zoom-icon">ğŸ”</span>
                        </div>
                    </div>
                    <div class="map-info">
                        <span class="map-icon">${m.icon}</span>
                        <div class="map-text">
                            <h4>${m.name}</h4>
                            <p>${m.desc}</p>
                            <span class="map-note">${m.note}</span>
                        </div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    
    metroSection.after(section);
    
    // æ–°å¢åœ–ç‰‡ Modal
    if (!document.getElementById('transportMapModal')) {
        const modal = document.createElement('div');
        modal.id = 'transportMapModal';
        modal.className = 'transport-map-modal';
        modal.innerHTML = `
            <div class="modal-backdrop" onclick="closeTransportMapModal()"></div>
            <div class="modal-container">
                <div class="modal-header">
                    <h3 id="transportMapTitle">è·¯ç·šåœ–</h3>
                    <button class="modal-close" onclick="closeTransportMapModal()">âœ•</button>
                </div>
                <div class="modal-image-wrapper">
                    <img id="transportMapImage" src="" alt="" />
                </div>
                <div class="modal-footer">
                    <span class="pinch-hint">ğŸ“± å¯é›™æŒ‡ç¸®æ”¾</span>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }
    
    const style = document.createElement('style');
    style.textContent = `
        .section-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 12px;
        }
        .transport-maps-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        .transport-map-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: var(--border-width) solid var(--border);
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .transport-map-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .transport-map-card:active {
            transform: scale(0.98);
        }
        .map-thumb {
            position: relative;
            height: 80px;
            overflow: hidden;
            background: #f5f5f5;
        }
        .map-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .transport-map-card:hover .map-thumb img {
            transform: scale(1.05);
        }
        .map-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .transport-map-card:hover .map-overlay {
            opacity: 1;
        }
        .zoom-icon {
            font-size: 1.5rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .map-info {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 10px;
        }
        .map-icon {
            font-size: 1.3rem;
            flex-shrink: 0;
        }
        .map-text {
            flex: 1;
            min-width: 0;
        }
        .map-text h4 {
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .map-text p {
            font-size: 0.65rem;
            color: var(--text-secondary);
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .map-note {
            display: inline-block;
            font-size: 0.6rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Transport Map Modal */
        .transport-map-modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 300;
        }
        .transport-map-modal.open {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .transport-map-modal .modal-backdrop {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.9);
        }
        .transport-map-modal .modal-container {
            position: relative;
            width: 95%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            background: var(--bg-card);
            border-radius: var(--radius);
            overflow: hidden;
        }
        .transport-map-modal .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-elevated);
            border-bottom: 1px solid var(--border);
        }
        .transport-map-modal .modal-header h3 {
            font-size: 1rem;
            font-weight: 700;
        }
        .transport-map-modal .modal-close {
            background: none;
            border: none;
            font-size: 1.3rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px 8px;
        }
        .transport-map-modal .modal-close:hover {
            color: var(--primary);
        }
        .transport-map-modal .modal-image-wrapper {
            flex: 1;
            overflow: auto;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            -webkit-overflow-scrolling: touch;
        }
        .transport-map-modal .modal-image-wrapper img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        .transport-map-modal .modal-footer {
            padding: 8px 16px;
            text-align: center;
            background: var(--bg-elevated);
            border-top: 1px solid var(--border);
        }
        .pinch-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        @media (max-width: 400px) {
            .transport-maps-grid {
                grid-template-columns: 1fr;
            }
            .map-thumb {
                height: 100px;
            }
        }
    `;
    document.head.appendChild(style);
}

// é–‹å•Ÿè·¯ç·šåœ– Modal
function openTransportMapModal(imageSrc, title) {
    const modal = document.getElementById('transportMapModal');
    const img = document.getElementById('transportMapImage');
    const titleEl = document.getElementById('transportMapTitle');
    
    img.src = imageSrc;
    img.alt = title;
    titleEl.textContent = title;
    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
}

// é—œé–‰è·¯ç·šåœ– Modal
function closeTransportMapModal() {
    const modal = document.getElementById('transportMapModal');
    modal.classList.remove('open');
    document.body.style.overflow = '';
}

// æ”¯æ´ ESC éµé—œé–‰
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeTransportMapModal();
    }
});

let members = JSON.parse(localStorage.getItem('fukuoka-members') || '["æˆ‘"]');

function addSplitBillSection() {
    const expenseSection = document.getElementById('expense');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'splitbill';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ‘¥</span>æ—…ä¼´åˆ†å¸³</h2>
        <div class="members-bar">
            <div class="members-list" id="membersList"></div>
            <button class="btn btn-accent add-member-btn" onclick="addMember()">+ æ–°å¢æ—…ä¼´</button>
        </div>
        <div class="split-summary" id="splitSummary"></div>
        <div class="split-detail" id="splitDetail"></div>
    `;
    
    expenseSection.after(section);
    renderMembers();
    renderSplitSummary();
    
    const style = document.createElement('style');
    style.textContent = `
        .members-bar {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        .members-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            flex: 1;
        }
        .member-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--purple);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 900;
            border: 2px solid var(--border);
        }
        .member-tag .remove {
            background: none;
            border: none;
            color: rgba(255,255,255,0.7);
            cursor: pointer;
            font-size: 1rem;
            padding: 0;
            margin-left: 4px;
        }
        .member-tag .remove:hover { color: white; }
        .add-member-btn {
            flex-shrink: 0;
            padding: 8px 16px !important;
            font-size: 0.85rem !important;
        }
        .split-summary {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 20px;
            border: var(--border-width) solid var(--border);
            box-shadow: var(--shadow);
            margin-bottom: 16px;
            text-align: center;
        }
        .split-total {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        .split-per-person {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
        }
        .split-per-twd {
            font-size: 1rem;
            color: var(--text-muted);
        }
        .split-detail {
            display: grid;
            gap: 8px;
        }
        .split-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            border: 2px solid var(--border);
        }
        .split-row .name {
            font-weight: 900;
        }
        .split-row .amount {
            font-weight: 900;
            color: var(--secondary);
        }
    `;
    document.head.appendChild(style);
}

// ===== å¤œç”Ÿæ´»å€å¡Š =====
function addNightlifeSection() {
    const splitBillSection = document.getElementById('splitbill');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'nightlife';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸŒ™</span>å¤œç”Ÿæ´»æ¨è–¦</h2>
        
        <h3 class="nightlife-subtitle">ğŸº å±…é…’å±‹æ¨è–¦</h3>
        <div class="nightlife-list">
            ${nightlifeData.izakaya.map(i => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.map)}" 
                   target="_blank" class="nightlife-card">
                    <div class="nightlife-icon">${i.icon}</div>
                    <div class="nightlife-info">
                        <div class="nightlife-header">
                            <h4>${i.name}</h4>
                            <span class="nightlife-tag">${i.tag}</span>
                        </div>
                        <p class="nightlife-desc">${i.desc}</p>
                        <p class="nightlife-loc">ğŸ“ ${i.loc}</p>
                    </div>
                    <span class="nightlife-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
        
        <h3 class="nightlife-subtitle">ğŸ¸ é…’å§æ¨è–¦</h3>
        <div class="nightlife-list">
            ${nightlifeData.bars.map(b => `
                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(b.map)}" 
                   target="_blank" class="nightlife-card bar">
                    <div class="nightlife-icon">${b.icon}</div>
                    <div class="nightlife-info">
                        <div class="nightlife-header">
                            <h4>${b.name}</h4>
                            <span class="nightlife-tag bar">${b.tag}</span>
                        </div>
                        <p class="nightlife-desc">${b.desc}</p>
                        <p class="nightlife-loc">ğŸ“ ${b.loc}</p>
                    </div>
                    <span class="nightlife-arrow">â†’</span>
                </a>
            `).join('')}
        </div>
        
        <div class="nightlife-note">
            <p>ğŸ’¡ <strong>è¦ªå­æé†’</strong>ï¼šå±‹å°è¡—é©åˆå¸¶å°å­©ï¼Œå±…é…’å±‹å»ºè­°18:00å‰å…¥å ´</p>
        </div>
    `;
    
    splitBillSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .nightlife-subtitle {
            font-size: 0.95rem;
            font-weight: 900;
            margin: 16px 0 10px;
            color: var(--text-primary);
        }
        .nightlife-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .nightlife-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .nightlife-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .nightlife-card.bar {
            background: linear-gradient(135deg, rgba(166,108,255,0.08) 0%, rgba(255,113,206,0.08) 100%);
        }
        .nightlife-icon { font-size: 1.8rem; }
        .nightlife-info { flex: 1; min-width: 0; }
        .nightlife-header { display: flex; align-items: center; gap: 8px; margin-bottom: 4px; flex-wrap: wrap; }
        .nightlife-header h4 { font-size: 0.9rem; font-weight: 900; }
        .nightlife-tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.6rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .nightlife-tag.bar { background: var(--purple); }
        .nightlife-desc { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 2px; }
        .nightlife-loc { font-size: 0.7rem; color: var(--text-muted); }
        .nightlife-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
        .nightlife-note {
            margin-top: 16px;
            padding: 12px 16px;
            background: rgba(255, 159, 67, 0.15);
            border-radius: var(--radius-sm);
            border: 2px solid var(--orange);
        }
        .nightlife-note p { font-size: 0.8rem; color: var(--text-secondary); }
        .nightlife-note strong { color: var(--orange); }
    `;
    document.head.appendChild(style);
}

// ===== è¦ªå­å‹å–„å»æ‰€å€å¡Š =====
function addBabyRoomSection() {
    const nightlifeSection = document.getElementById('nightlife');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'babyroom';
    
    const renderRoom = (room) => `
        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(room.map)}" 
           target="_blank" class="babyroom-card ${room.recommended ? 'recommended' : ''}">
            <div class="babyroom-main">
                <div class="babyroom-header">
                    <h4>${room.name} ${room.recommended ? '<span class="babyroom-badge">â­æ¨è–¦</span>' : ''}</h4>
                    <span class="babyroom-floor">${room.floor}</span>
                </div>
                <div class="babyroom-stats">
                    <span>ğŸš¼ å°¿å¸ƒå°Ã—${room.diaper}</span>
                    <span>ğŸ¤± æˆä¹³å®¤Ã—${room.nursing}</span>
                </div>
                <div class="babyroom-extras">
                    ${room.extras.map(e => `<span class="extra-tag">${e}</span>`).join('')}
                </div>
            </div>
            <span class="babyroom-arrow">â†’</span>
        </a>
    `;
    
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ‘¶</span>è¦ªå­å‹å–„å»æ‰€</h2>
        
        <h3 class="babyroom-subtitle">ğŸ“ å¤©ç¥å€ï¼ˆé£¯åº—é™„è¿‘ï¼‰</h3>
        <div class="babyroom-list">
            ${babyRoomData.tenjin.map(renderRoom).join('')}
        </div>
        
        <h3 class="babyroom-subtitle">ğŸ“ åšå¤šå€</h3>
        <div class="babyroom-list">
            ${babyRoomData.hakata.map(renderRoom).join('')}
        </div>
        
        <div class="babyroom-tip">
            <p>ğŸ’¡ <strong>æ¨è–¦</strong>ï¼šåšå¤šé˜ªæ€¥7F è¨­å‚™æœ€é½Šå…¨ï¼ˆå°¿å¸ƒå°Ã—9ãƒ»æˆä¹³å®¤Ã—4ï¼‰</p>
        </div>
    `;
    
    nightlifeSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .babyroom-subtitle {
            font-size: 0.95rem;
            font-weight: 900;
            margin: 16px 0 10px;
            color: var(--text-primary);
        }
        .babyroom-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .babyroom-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .babyroom-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .babyroom-card.recommended {
            background: linear-gradient(135deg, rgba(255,113,206,0.1) 0%, rgba(78,205,196,0.1) 100%);
            border-color: var(--pink);
        }
        .babyroom-main { flex: 1; }
        .babyroom-header { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; flex-wrap: wrap; }
        .babyroom-header h4 { font-size: 0.9rem; font-weight: 900; display: flex; align-items: center; gap: 6px; }
        .babyroom-floor { font-size: 0.75rem; color: var(--secondary); font-weight: 900; }
        .babyroom-badge {
            display: inline-block;
            background: var(--pink);
            color: white;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .babyroom-stats {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }
        .babyroom-extras { display: flex; gap: 6px; flex-wrap: wrap; }
        .extra-tag {
            font-size: 0.65rem;
            background: var(--bg-elevated);
            padding: 2px 8px;
            border-radius: 10px;
            color: var(--text-muted);
        }
        .babyroom-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
        .babyroom-tip {
            margin-top: 16px;
            padding: 12px 16px;
            background: rgba(255, 113, 206, 0.12);
            border-radius: var(--radius-sm);
            border: 2px solid var(--pink);
        }
        .babyroom-tip p { font-size: 0.8rem; color: var(--text-secondary); }
        .babyroom-tip strong { color: var(--pink); }
    `;
    document.head.appendChild(style);
}

// ===== å¤¾å¨ƒå¨ƒæ©Ÿåº—å€å¡Š =====
function addArcadeSection() {
    const babyRoomSection = document.getElementById('babyroom');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'arcade';
    
    const renderArcade = (a) => `
        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.map)}" 
           target="_blank" class="arcade-card ${a.recommended ? 'recommended' : ''}">
            <div class="arcade-icon">ğŸ®</div>
            <div class="arcade-info">
                <h4>${a.name} ${a.recommended ? '<span class="arcade-badge">â­æ¨è–¦</span>' : ''}</h4>
                <p class="arcade-desc">${a.desc}</p>
                <p class="arcade-note">ğŸ“ ${a.note}</p>
            </div>
            <span class="arcade-arrow">â†’</span>
        </a>
    `;
    
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">ğŸ®</span>å¤¾å¨ƒå¨ƒæ©Ÿåº—</h2>
        
        <h3 class="arcade-subtitle">ğŸ“ å¤©ç¥å€ï¼ˆé£¯åº—é™„è¿‘ï¼‰</h3>
        <div class="arcade-list">
            ${arcadeData.tenjin.map(renderArcade).join('')}
        </div>
        
        <h3 class="arcade-subtitle">ğŸ“ åšå¤šå€</h3>
        <div class="arcade-list">
            ${arcadeData.hakata.map(renderArcade).join('')}
        </div>
        
        <div class="arcade-tip">
            <p>ğŸ’¡ <strong>çœéŒ¢æ¨è–¦</strong>ï¼šG-palaåšå¤š æœ‰10å††å¤¾å¨ƒå¨ƒæ©Ÿï¼</p>
        </div>
    `;
    
    babyRoomSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .arcade-subtitle {
            font-size: 0.95rem;
            font-weight: 900;
            margin: 16px 0 10px;
            color: var(--text-primary);
        }
        .arcade-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .arcade-card {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 14px 16px;
            border: var(--border-width) solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .arcade-card:hover {
            transform: translateX(4px);
            background: var(--bg-elevated);
        }
        .arcade-card.recommended {
            background: linear-gradient(135deg, rgba(166,108,255,0.1) 0%, rgba(255,230,109,0.1) 100%);
            border-color: var(--purple);
        }
        .arcade-icon { font-size: 1.8rem; }
        .arcade-info { flex: 1; min-width: 0; }
        .arcade-info h4 { font-size: 0.9rem; font-weight: 900; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
        .arcade-badge {
            display: inline-block;
            background: var(--purple);
            color: white;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
        }
        .arcade-desc { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 2px; }
        .arcade-note { font-size: 0.7rem; color: var(--text-muted); }
        .arcade-arrow { font-size: 1.2rem; color: var(--secondary); font-weight: 900; }
        .arcade-tip {
            margin-top: 16px;
            padding: 12px 16px;
            background: rgba(166,108,255,0.12);
            border-radius: var(--radius-sm);
            border: 2px solid var(--purple);
        }
        .arcade-tip p { font-size: 0.8rem; color: var(--text-secondary); }
        .arcade-tip strong { color: var(--purple); }
    `;
    document.head.appendChild(style);
}

// ===== æ©Ÿå ´è³¼ç‰©å€å¡Š =====
function addAirportShopSection() {
    const arcadeSection = document.getElementById('arcade');
    
    const section = document.createElement('section');
    section.className = 'section';
    section.id = 'airportshop';
    section.innerHTML = `
        <h2 class="section-title"><span class="title-icon">âœˆï¸</span>æ©Ÿå ´è³¼ç‰©</h2>
        
        <div class="airport-info-box">
            <p class="airport-date">ğŸ“… ${airportShopData.info.openDate}</p>
            <p class="airport-stat">ğŸ›ï¸ å…ç¨…åº—ï¼š${airportShopData.info.dutyFreeArea}</p>
            <p class="airport-stat">ğŸ·ï¸ ${airportShopData.info.brands}</p>
        </div>
        
        <h3 class="airport-subtitle">ğŸ›’ å…ç¨…åº—äº®é»å“ç‰Œ</h3>
        <div class="airport-brands">
            ${airportShopData.dutyfree.map(d => `
                <span class="brand-tag ${d.tag ? 'new' : ''}">${d.name}${d.tag ? ` â­` : ''}</span>
            `).join('')}
        </div>
        
        <h3 class="airport-subtitle">ğŸœ HAKATA FOOD HALLï¼ˆå‡ºå¢ƒå¾Œï¼‰</h3>
        <div class="airport-food">
            ${airportShopData.food.map(f => `
                <div class="food-item">
                    <span class="food-name">${f.name}</span>
                    <span class="food-type">${f.type}</span>
                </div>
            `).join('')}
        </div>
        
        <h3 class="airport-subtitle">ğŸ ä¼´æ‰‹ç¦®å€ï¼ˆ57å“ç‰Œï¼‰</h3>
        <div class="airport-souvenirs">
            ${airportShopData.souvenirs.map(s => `
                <span class="souvenir-tag">${s.name}</span>
            `).join('')}
        </div>
    `;
    
    arcadeSection.after(section);
    
    const style = document.createElement('style');
    style.textContent = `
        .airport-info-box {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%);
            color: white;
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 16px;
            border: var(--border-width) solid var(--border);
        }
        .airport-date { font-size: 0.95rem; font-weight: 900; margin-bottom: 8px; }
        .airport-stat { font-size: 0.8rem; opacity: 0.95; }
        .airport-subtitle {
            font-size: 0.95rem;
            font-weight: 900;
            margin: 16px 0 10px;
            color: var(--text-primary);
        }
        .airport-brands {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .brand-tag {
            background: var(--bg-card);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 2px solid var(--border);
        }
        .brand-tag.new { background: var(--accent); }
        .airport-food {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .food-item {
            display: flex;
            justify-content: space-between;
            background: var(--bg-card);
            padding: 10px 14px;
            border-radius: var(--radius-sm);
            border: 2px solid var(--border);
        }
        .food-name { font-size: 0.8rem; font-weight: 700; }
        .food-type { font-size: 0.75rem; color: var(--secondary); font-weight: 700; }
        .airport-souvenirs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .souvenir-tag {
            background: var(--orange);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 2px solid var(--border);
        }
    `;
    document.head.appendChild(style);
}

function renderMembers() {
    const container = document.getElementById('membersList');
    container.innerHTML = members.map((m, i) => `
        <span class="member-tag">
            ${m}
            ${i > 0 ? `<button class="remove" onclick="removeMember(${i})">Ã—</button>` : ''}
        </span>
    `).join('');
}

function addMember() {
    const name = prompt('è«‹è¼¸å…¥æ—…ä¼´åç¨±ï¼š');
    if (name && name.trim()) {
        members.push(name.trim());
        localStorage.setItem('fukuoka-members', JSON.stringify(members));
        renderMembers();
        renderSplitSummary();
    }
}

function removeMember(index) {
    if (confirm(`ç¢ºå®šç§»é™¤ ${members[index]}ï¼Ÿ`)) {
        members.splice(index, 1);
        localStorage.setItem('fukuoka-members', JSON.stringify(members));
        renderMembers();
        renderSplitSummary();
    }
}

function renderSplitSummary() {
    const total = expenses.reduce((sum, e) => sum + e.amount, 0);
    const perPerson = members.length > 0 ? Math.ceil(total / members.length) : 0;
    
    const summary = document.getElementById('splitSummary');
    const detail = document.getElementById('splitDetail');
    
    summary.innerHTML = `
        <div class="split-total">ç¸½æ”¯å‡º Â¥${total.toLocaleString()} Ã· ${members.length} äºº</div>
        <div class="split-per-person">Â¥${perPerson.toLocaleString()}</div>
        <div class="split-per-twd">â‰ˆ NT$${Math.round(perPerson * JPY_TO_TWD).toLocaleString()} / äºº</div>
    `;
    
    detail.innerHTML = members.map(m => `
        <div class="split-row">
            <span class="name">ğŸ‘¤ ${m}</span>
            <span class="amount">Â¥${perPerson.toLocaleString()}</span>
        </div>
    `).join('');
}

// æ›´æ–°è¨˜å¸³æ™‚åŒæ­¥æ›´æ–°åˆ†å¸³
const originalRenderExpenses = renderExpenses;
renderExpenses = function() {
    originalRenderExpenses();
    if (document.getElementById('splitSummary')) {
        renderSplitSummary();
    }
};
